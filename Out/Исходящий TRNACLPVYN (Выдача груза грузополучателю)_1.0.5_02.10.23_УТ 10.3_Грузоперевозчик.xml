<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ТипТранзакции</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Источник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Приемник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Данные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Обязательный</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Атрибуты</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Связи</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ДанныеЗначения</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ДоступныеЗначения</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">ИдИнфГП</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:boolean">false</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">23</lastId>
					<item>
						<value xsi:type="xs:string">ИдФайлИнфГП</value>
						<presentation>Документ.ИдентификаторОснования</presentation>
						<id xsi:type="xs:decimal">20</id>
					</item>
					<item>
						<value xsi:type="xs:string">ДатФайлИнфГП</value>
						<presentation>Документ.ДатФайлИнфГП</presentation>
						<id xsi:type="xs:decimal">21</id>
					</item>
					<item>
						<value xsi:type="xs:string">ВрФайлИнфГП</value>
						<presentation>Документ.ВрФайлИнфГП</presentation>
						<id xsi:type="xs:decimal">22</id>
					</item>
					<item>
						<value xsi:type="xs:string">ЭП</value>
						<presentation>Документ.ЭП</presentation>
						<id xsi:type="xs:decimal">23</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<row>
					<row>
						<row>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string">ТекстИнф</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">1</lastId>
								<item>
									<value xsi:type="xs:string">Идентиф</value>
									<id xsi:type="xs:decimal">0</id>
								</item>
								<item>
									<value xsi:type="xs:string">Значение</value>
									<id xsi:type="xs:decimal">1</id>
								</item>
							</Value>
							<Value xsi:nil="true"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="ValueTable"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
						</row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">ИнфПол</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">0</lastId>
							<item>
								<value xsi:type="xs:string">ИдФайлИнфПол</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
						</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ЗамПрвВыд</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">43</lastId>
						<item>
							<value xsi:type="xs:string">ЗамДатаВрПриб</value>
							<presentation>Документ.ЗамДатаВрПрибСтр</presentation>
							<id xsi:type="xs:decimal">36</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрПр</value>
							<presentation>Документ.НалКоорТочВрПр</presentation>
							<id xsi:type="xs:decimal">37</id>
						</item>
						<item>
							<value xsi:type="xs:string">ЗамДатВрУбыт</value>
							<presentation>Документ.ЗамДатВрУбытСтр</presentation>
							<id xsi:type="xs:decimal">38</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрУб</value>
							<presentation>Документ.НалКоорТочВрУб</presentation>
							<id xsi:type="xs:decimal">39</id>
						</item>
						<item>
							<value xsi:type="xs:string">ЗамДатВрПосВыгр</value>
							<presentation>Документ.ЗамДатВрПосВыгрСтр</presentation>
							<id xsi:type="xs:decimal">40</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрВыгр</value>
							<presentation>Документ.НалКоорТочВрВыгр</presentation>
							<id xsi:type="xs:decimal">41</id>
						</item>
						<item>
							<value xsi:type="xs:string">ЗамСостГруз</value>
							<presentation>Документ.ЗамСостГруз</presentation>
							<id xsi:type="xs:decimal">42</id>
						</item>
						<item>
							<value xsi:type="xs:string">ЗамРабВыгр</value>
							<presentation>Документ.ЗамРабВыгр</presentation>
							<id xsi:type="xs:decimal">43</id>
						</item>
					</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<row>
						<row>
							<row>
								<row>
									<Value xsi:type="xs:boolean">false</Value>
									<Value xsi:type="xs:string"/>
									<Value xsi:type="xs:string"/>
									<Value xsi:type="xs:string"/>
									<Value xsi:type="xs:string">УдЛичнИнФЛ</Value>
									<Value xsi:type="xs:string"/>
									<Value xsi:type="xs:boolean">false</Value>
									<Value xsi:type="ValueListType">
										<valueType/>
										<lastId xsi:type="xs:decimal">2</lastId>
										<item>
											<value xsi:type="xs:string">ВидДок</value>
											<id xsi:type="xs:decimal">0</id>
										</item>
										<item>
											<value xsi:type="xs:string">НомДок</value>
											<id xsi:type="xs:decimal">1</id>
										</item>
										<item>
											<value xsi:type="xs:string">ДатаДок</value>
											<id xsi:type="xs:decimal">2</id>
										</item>
									</Value>
									<Value xsi:nil="true"/>
									<Value xsi:type="ValueListType">
										<valueType/>
										<lastId xsi:type="xs:decimal">-1</lastId>
									</Value>
									<Value xsi:type="xs:decimal">0</Value>
									<Value xsi:type="xs:decimal">0</Value>
									<Value xsi:type="ValueTable"/>
									<Value xsi:type="ValueListType">
										<valueType/>
										<lastId xsi:type="xs:decimal">-1</lastId>
									</Value>
									<Value xsi:type="ValueListType">
										<valueType/>
										<lastId xsi:type="xs:decimal">-1</lastId>
									</Value>
								</row>
								<Value xsi:type="xs:boolean">false</Value>
								<Value xsi:type="xs:string"/>
								<Value xsi:type="xs:string"/>
								<Value xsi:type="xs:string"/>
								<Value xsi:type="xs:string">ДаннИно</Value>
								<Value xsi:type="xs:string"/>
								<Value xsi:type="xs:boolean">false</Value>
								<Value xsi:type="ValueListType">
									<valueType/>
									<lastId xsi:type="xs:decimal">4</lastId>
									<item>
										<value xsi:type="xs:string">ИдСтат</value>
										<id xsi:type="xs:decimal">0</id>
									</item>
									<item>
										<value xsi:type="xs:string">Стран</value>
										<id xsi:type="xs:decimal">1</id>
									</item>
									<item>
										<value xsi:type="xs:string">Наим</value>
										<id xsi:type="xs:decimal">2</id>
									</item>
									<item>
										<value xsi:type="xs:string">Идентиф</value>
										<id xsi:type="xs:decimal">3</id>
									</item>
									<item>
										<value xsi:type="xs:string">ИныеСвед</value>
										<id xsi:type="xs:decimal">4</id>
									</item>
								</Value>
								<Value xsi:nil="true"/>
								<Value xsi:type="ValueListType">
									<valueType/>
									<lastId xsi:type="xs:decimal">-1</lastId>
								</Value>
								<Value xsi:type="xs:decimal">0</Value>
								<Value xsi:type="xs:decimal">0</Value>
								<Value xsi:type="ValueTable"/>
								<Value xsi:type="ValueListType">
									<valueType/>
									<lastId xsi:type="xs:decimal">-1</lastId>
								</Value>
								<Value xsi:type="ValueListType">
									<valueType/>
									<lastId xsi:type="xs:decimal">-1</lastId>
								</Value>
							</row>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string">ИдРекСост</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:nil="true"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="ValueTable"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
						</row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">СвАкт</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">9</lastId>
							<item>
								<value xsi:type="xs:string">НаимДок</value>
								<id xsi:type="xs:decimal">5</id>
							</item>
							<item>
								<value xsi:type="xs:string">НомерДок</value>
								<id xsi:type="xs:decimal">6</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДатаДок</value>
								<id xsi:type="xs:decimal">7</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИдДок</value>
								<id xsi:type="xs:decimal">8</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДопСведДок</value>
								<id xsi:type="xs:decimal">9</id>
							</item>
						</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">1</lastId>
							<item>
								<value xsi:type="xs:string">Документ.Ссылка</value>
								<presentation>СвАкт.Ссылка</presentation>
								<id xsi:type="xs:decimal">0</id>
							</item>
							<item>
								<value xsi:type="xs:string"/>
								<id xsi:type="xs:decimal">1</id>
							</item>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">0</lastId>
							<item>
								<value xsi:type="xs:string">НомерПоПорядку</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">РазмШтр</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">7</lastId>
							<item>
								<value xsi:type="xs:string">ФактКолЕдИзм</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИтогРазмШтрРФ</value>
								<id xsi:type="xs:decimal">1</id>
							</item>
							<item>
								<value xsi:type="xs:string">КодОКВ</value>
								<id xsi:type="xs:decimal">2</id>
							</item>
							<item>
								<value xsi:type="xs:string">НаимОКВ</value>
								<id xsi:type="xs:decimal">3</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИтогРазмШтрИн</value>
								<id xsi:type="xs:decimal">4</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДатаКурсВал</value>
								<id xsi:type="xs:decimal">5</id>
							</item>
							<item>
								<value xsi:type="xs:string">КурсВал</value>
								<id xsi:type="xs:decimal">6</id>
							</item>
							<item>
								<value xsi:type="xs:string">РасчШтр</value>
								<id xsi:type="xs:decimal">7</id>
							</item>
						</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<row>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string">ТекстИнф</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">1</lastId>
								<item>
									<value xsi:type="xs:string">Идентиф</value>
									<id xsi:type="xs:decimal">0</id>
								</item>
								<item>
									<value xsi:type="xs:string">Значение</value>
									<id xsi:type="xs:decimal">1</id>
								</item>
							</Value>
							<Value xsi:nil="true"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="ValueTable"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
						</row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">ИнфПол</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">0</lastId>
							<item>
								<value xsi:type="xs:string">ИдФайлИнфПол</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
						</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ОтметПрвВыд</Value>
					<Value xsi:type="xs:string">Запрос = Новый Запрос;  
Запрос.Текст ="ВЫБРАТЬ
              |	DR_Документы.ДанныеДокумента КАК ДанныеДокумента,
              |	DR_Документы.Ссылка КАК Ссылка
              |ИЗ
              |	Документ.DR_Документы КАК DR_Документы
              |ГДЕ
              |	DR_Документы.Ссылка В(&amp;Документ)";

Запрос.УстановитьПараметр("Документ", Источник);
РезультатЗапроса = Запрос.Выполнить(); 
ТЧРезультатЗапроса = РезультатЗапроса.Выгрузить();

ПустойUTC = "+00:00";  

Результат = Новый ТаблицаЗначений;
	
Результат.Колонки.Добавить("ДатВрОтмет", Новый ОписаниеТипов("Дата"));
Результат.Колонки.Добавить("ДатВрОтметСтр", Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ОбстОтмет", Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ОтмАктВзв", Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("НалКоорТочВрОтм", Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("Ссылка", Новый ОписаниеТипов("ДокументСсылка.DR_Документы"));
	
Для Каждого Строка из ТЧРезультатЗапроса Цикл  
	
	СтруктураТЧ = ВернутьЗначениеДопРеквизитаИзДокумента("Таблицы", Строка.Ссылка.ДополнительныеРеквизиты); 
	
	Если Не СтруктураТЧ = Неопределено Тогда
		
		СтруктураТЧ = СтруктураТЧ.Получить();
			
		Для Каждого МассивДанныхТЧ Из СтруктураТЧ Цикл
					
			Если МассивДанныхТЧ.Ключ = "СведенияШтрафов" Тогда
				Если МассивДанныхТЧ.Значение.Количество() Тогда
											
					Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
						НоваяСтрока = Результат.Добавить(); 
						ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
						
						НоваяСтрока.Ссылка 		= Строка.Ссылка;
						НоваяСтрока.ДатВрОтметСтр 	= Строка(Формат(НоваяСтрока.ДатВрОтмет,"ДФ=dd.MM.yyyy")) + "T" + Формат(НоваяСтрока.ДатВрОтмет,"ДЛФ=T") + ПустойUTC;
		 				НоваяСтрока.НалКоорТочВрОтм 	= "0"; 
					КонецЦикла; 
				КонецЕсли;
			КонецЕсли;
			
			Если МассивДанныхТЧ.Ключ = "СведенияИныхАктов" Тогда		
				Если МассивДанныхТЧ.Значение.Количество() Тогда						
					Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
						НоваяСтрока = Результат.Добавить(); 
						ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
						
						НоваяСтрока.Ссылка 		= Строка.Ссылка; 
						НоваяСтрока.ДатВрОтметСтр 	= Строка(Формат(НоваяСтрока.ДатВрОтмет,"ДФ=dd.MM.yyyy")) + "T" + Формат(НоваяСтрока.ДатВрОтмет,"ДЛФ=T") + ПустойUTC;
		 				НоваяСтрока.НалКоорТочВрОтм 	= "0";
					КонецЦикла; 
				КонецЕсли;
			КонецЕсли;
		КонецЦикла; 
	
	КонецЕсли;
	
КонецЦикла;

Результат.Свернуть("ДатВрОтметСтр, НалКоорТочВрОтм, ОбстОтмет, ОтмАктВзв, Ссылка");


Возврат Результат;</Value>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">27</lastId>
						<item>
							<value xsi:type="xs:string">ДатВрОтмет</value>
							<presentation>ОтметПрвВыд.ДатВрОтмет</presentation>
							<id xsi:type="xs:decimal">24</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрОтм</value>
							<presentation>ОтметПрвВыд.НалКоорТочВрОтм</presentation>
							<id xsi:type="xs:decimal">25</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОбстОтмет</value>
							<presentation>ОтметПрвВыд.ОбстОтмет</presentation>
							<id xsi:type="xs:decimal">26</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОтмАктВзв</value>
							<presentation>ОтметПрвВыд.ОтмАктВзв</presentation>
							<id xsi:type="xs:decimal">27</id>
						</item>
					</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">2</lastId>
						<item>
							<value xsi:type="xs:string">Документ.Ссылка</value>
							<presentation>ОтметПрвПрием.Ссылка</presentation>
							<id xsi:type="xs:decimal">2</id>
						</item>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">4</lastId>
						<item>
							<value xsi:type="xs:string">ДатВрОтметСтр</value>
							<id xsi:type="xs:decimal">0</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОбстОтмет</value>
							<id xsi:type="xs:decimal">1</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОтмАктВзв</value>
							<id xsi:type="xs:decimal">2</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрОтм</value>
							<id xsi:type="xs:decimal">3</id>
						</item>
						<item>
							<value xsi:type="xs:string">Ссылка</value>
							<id xsi:type="xs:decimal">4</id>
						</item>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">ТекстИнф</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">1</lastId>
							<item>
								<value xsi:type="xs:string">Идентиф</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
							<item>
								<value xsi:type="xs:string">Значение</value>
								<id xsi:type="xs:decimal">1</id>
							</item>
						</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ИнфПол</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">0</lastId>
						<item>
							<value xsi:type="xs:string">ИдФайлИнфПол</value>
							<id xsi:type="xs:decimal">0</id>
						</item>
					</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">СодПрвВыд</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:boolean">false</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">7</lastId>
					<item>
						<value xsi:type="xs:string">УИД_ТрН</value>
						<presentation>Документ.УИдТрН</presentation>
						<id xsi:type="xs:decimal">6</id>
					</item>
					<item>
						<value xsi:type="xs:string">СодОпер</value>
						<presentation>Документ.СодОпер</presentation>
						<id xsi:type="xs:decimal">7</id>
					</item>
				</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<row>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ФИО</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">5</lastId>
						<item>
							<value xsi:type="xs:string">Фамилия</value>
							<presentation>Документ.ФамилияПодп</presentation>
							<id xsi:type="xs:decimal">3</id>
						</item>
						<item>
							<value xsi:type="xs:string">Имя</value>
							<presentation>Документ.ИмяПодп</presentation>
							<id xsi:type="xs:decimal">4</id>
						</item>
						<item>
							<value xsi:type="xs:string">Отчество</value>
							<presentation>Документ.ОтчествоПодп</presentation>
							<id xsi:type="xs:decimal">5</id>
						</item>
					</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">СвДовер</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">3</lastId>
						<item>
							<value xsi:type="xs:string">ДатаДовер</value>
							<id xsi:type="xs:decimal">0</id>
						</item>
						<item>
							<value xsi:type="xs:string">НомерДовер</value>
							<id xsi:type="xs:decimal">1</id>
						</item>
						<item>
							<value xsi:type="xs:string">ИдентДовер</value>
							<id xsi:type="xs:decimal">2</id>
						</item>
						<item>
							<value xsi:type="xs:string">СведСистОтм</value>
							<id xsi:type="xs:decimal">3</id>
						</item>
					</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">Подписант</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:boolean">false</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">7</lastId>
					<item>
						<value xsi:type="xs:string">СтатПодп</value>
						<presentation>Документ.СтатПодп</presentation>
						<id xsi:type="xs:decimal">6</id>
					</item>
					<item>
						<value xsi:type="xs:string">Должн</value>
						<presentation>Документ.ДолжнПодп</presentation>
						<id xsi:type="xs:decimal">7</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Документ</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:boolean">false</Value>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">19</lastId>
				<item>
					<value xsi:type="xs:string">КНД</value>
					<presentation>Документ.КНД</presentation>
					<id xsi:type="xs:decimal">16</id>
				</item>
				<item>
					<value xsi:type="xs:string">ПоФактХЖ</value>
					<presentation>Документ.ПоФактХЖ</presentation>
					<id xsi:type="xs:decimal">17</id>
				</item>
				<item>
					<value xsi:type="xs:string">ДатИнфПрвВыд</value>
					<presentation>Документ.ДатИнфПрвВыд</presentation>
					<id xsi:type="xs:decimal">18</id>
				</item>
				<item>
					<value xsi:type="xs:string">ВрИнфПрвВыд</value>
					<presentation>Документ.ВрИнфПрвВыд</presentation>
					<id xsi:type="xs:decimal">19</id>
				</item>
			</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
			<Value xsi:type="xs:decimal">0</Value>
			<Value xsi:type="xs:decimal">0</Value>
			<Value xsi:type="ValueTable"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Исходящий TRNACLPVYN (Выдача груза грузополучателю)</Value>
		<Value xsi:type="xs:string">Отправить титул ГПер Т4</Value>
		<Value xsi:type="xs:string">ТекущийДокумент</Value>
		<Value xsi:type="xs:string">Файл</Value>
		<Value xsi:type="xs:string">ЗапросМЧД = Новый Запрос; 
ЗапросМЧД.УстановитьПараметр("ЭтоРегламентноеЗадание", ЭтоРегламентноеЗадание); 
ЗапросМЧД.УстановитьПараметр("Пользователь", НайтиТекущегоПользователя()); 
ЗапросМЧД.УстановитьПараметр("ТекущаяДата", ТекущаяДата()); 
ЗапросМЧД.УстановитьПараметр("DR_УчастникиОбмена", DR_УчастникиОбмена.Выгрузить()); 
ЗапросМЧД.УстановитьПараметр("DR_ПрофилиОбмена", DR_ПрофилиОбмена.Выгрузить()); 
ЗапросМЧД.Текст = ТекстЗапроса_МЧД_ПоОрганизациям(); 
ТаблицаМЧД = ЗапросМЧД.Выполнить().Выгрузить();

Запрос = Новый Запрос;  
Запрос.Текст ="ВЫБРАТЬ
              |	DR_УчастникиОбмена.Ссылка КАК Ссылка,
              |	DR_УчастникиОбмена.GUID КАК GUID,
              |	DR_УчастникиОбмена.Роль КАК Роль,
              |	DR_УчастникиОбмена.ПоддерживаетМЧД КАК ОтправитьМЧД
              |ПОМЕСТИТЬ DR_УчастникиОбмена
              |ИЗ
              |	&amp;DR_УчастникиОбмена КАК DR_УчастникиОбмена
              |;
              |
              |////////////////////////////////////////////////////////////////////////////////
              |ВЫБРАТЬ
              |	DR_ДокументыДополнительныеРеквизиты.Ссылка КАК Ссылка,
              |	DR_ДокументыДополнительныеРеквизиты.Реквизит КАК Реквизит,
              |	DR_ДокументыДополнительныеРеквизиты.Значение КАК Значение
              |ПОМЕСТИТЬ DR_ДополнительныеРеквизиты
              |ИЗ
              |	Документ.DR_Документы.ДополнительныеРеквизиты КАК DR_ДокументыДополнительныеРеквизиты
              |ГДЕ
              |	DR_ДокументыДополнительныеРеквизиты.Ссылка В(&amp;Документ)
              |;
              |
              |////////////////////////////////////////////////////////////////////////////////
              |ВЫБРАТЬ
              |	DR_Документ.Ссылка КАК DR_Документ,
              |	Грузоотправитель_GUID.Значение КАК Грузоотправитель,
              |	Грузополучатель_GUID.Значение КАК Грузополучатель,
              |	Грузоперевозчик_GUID.Значение КАК Грузоперевозчик,
              |	ИдентификаторОснования.Значение КАК ИдентификаторОснования,
              |	Организация_GUID.Значение КАК Организация,
              |	Заказчик_GUID.Значение КАК Заказчик
              |ПОМЕСТИТЬ ВТ_DRДокументУчастники
              |ИЗ
              |	Документ.DR_Документы КАК DR_Документ
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузоотправитель_GUID
              |		ПО DR_Документ.Ссылка = Грузоотправитель_GUID.Ссылка
              |			И (Грузоотправитель_GUID.Реквизит = ""Грузоотправитель"")
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузополучатель_GUID
              |		ПО DR_Документ.Ссылка = Грузополучатель_GUID.Ссылка
              |			И (Грузополучатель_GUID.Реквизит = ""Грузополучатель"")
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузоперевозчик_GUID
              |		ПО DR_Документ.Ссылка = Грузоперевозчик_GUID.Ссылка
              |			И (Грузоперевозчик_GUID.Реквизит = ""Грузоперевозчик"")
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Организация_GUID
              |		ПО DR_Документ.Ссылка = Организация_GUID.Ссылка
              |			И (Организация_GUID.Реквизит = ""Организация"")
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Заказчик_GUID
              |		ПО DR_Документ.Ссылка = Заказчик_GUID.Ссылка
              |			И (Заказчик_GUID.Реквизит = ""Заказчик"")
              |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК ИдентификаторОснования
              |		ПО DR_Документ.Ссылка = ИдентификаторОснования.Ссылка
              |			И (ИдентификаторОснования.Реквизит = ""ИдентификаторОснования"")
              |ГДЕ
              |	DR_Документ.Ссылка В(&amp;Документ)
              |;
              |
              |////////////////////////////////////////////////////////////////////////////////
              |ВЫБРАТЬ
              |	DR_Документы.Ссылка КАК Ссылка,
              |	DR_Документы.Ссылка.Номер КАК Номер,
              |	DR_Документы.Ссылка.ИдентификаторДокумента КАК ИдентификаторДокумента,
              |	""ON_TRNACLPVYN_Исходящий"" КАК ВидДокумента,
              |	ВТ_DRДокументУчастники.Грузоотправитель КАК Грузоотправитель,
              |	ВТ_DRДокументУчастники.Грузополучатель КАК Грузополучатель,
              |	ВТ_DRДокументУчастники.Грузоперевозчик КАК Грузоперевозчик,
              |	ВТ_DRДокументУчастники.Организация КАК Организация,
              |	DR_ДокументыОснование.Дата КАК ДатаОсн,
			  |	DR_ДокументыОснование.Ссылка КАК ДокументОснование,
              |	ВТ_DRДокументУчастники.Заказчик КАК Заказчик,
              |	DR_УчастникиОбмена.ОтправитьМЧД КАК ОтправитьМЧД
              |ИЗ
              |	Документ.DR_Документы КАК DR_Документы
              |		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_DRДокументУчастники КАК ВТ_DRДокументУчастники
              |			ЛЕВОЕ СОЕДИНЕНИЕ Документ.DR_Документы КАК DR_ДокументыОснование
              |			ПО ВТ_DRДокументУчастники.ИдентификаторОснования = DR_ДокументыОснование.ИдентификаторДокумента
			  |				И DR_ДокументыОснование.ВидДокумента = ""ON_TRNACLGRPO_Входящий""
              |			ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК DR_УчастникиОбмена
              |			ПО ВТ_DRДокументУчастники.Организация = DR_УчастникиОбмена.Ссылка
              |				И (DR_УчастникиОбмена.Роль = ""Грузоперевозчик"")
              |		ПО DR_Документы.Ссылка = ВТ_DRДокументУчастники.DR_Документ
              |ГДЕ
              |	DR_Документы.Ссылка В(&amp;Документ)";
Запрос.УстановитьПараметр("DR_УчастникиОбмена", DR_УчастникиОбмена.Выгрузить());
Запрос.УстановитьПараметр("Документ", Источник);
РезультатЗапроса = Запрос.Выполнить(); 
Результат = РезультатЗапроса.Выгрузить();

Результат.Колонки.Добавить("ИдФайл"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВерсПрог"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВерсФорм"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ИмяФайла"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ИдПолИной"				, Новый ОписаниеТипов("СписокЗначений"));
Результат.Колонки.Добавить("КНД"					, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ПоФактХЖ"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ДатИнфПрвВыд"			, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВрИнфПрвВыд"			, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("УИдТрН"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("СодОпер"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ДатФайлИнфГП"			, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВрФайлИнфГП"			, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ИдентификаторОснования", Новый ОписаниеТипов("Строка")); //ИдФайлИнфГП
Результат.Колонки.Добавить("ЭП"					, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ЗамДатВрПриб"			, Новый ОписаниеТипов("Дата")); 
Результат.Колонки.Добавить("НалКоорТочВрПр"		, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамДатВрУбыт"			, Новый ОписаниеТипов("Дата")); 
Результат.Колонки.Добавить("НалКоорТочВрУб"		, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамДатВрПосВыгр"		, Новый ОписаниеТипов("Дата")); 
Результат.Колонки.Добавить("НалКоорТочВрВыгр"		, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамДатаВрПрибСтр"		, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамДатВрУбытСтр"		, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамДатВрПосВыгрСтр"	, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамСостГруз"			, Новый ОписаниеТипов("Строка")); 
Результат.Колонки.Добавить("ЗамРабВыгр"			, Новый ОписаниеТипов("Строка")); 

Результат.Колонки.Добавить("СтатПодп"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ДолжнПодп"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ФамилияПодп"			, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ИмяПодп"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ОтчествоПодп"			, Новый ОписаниеТипов("Строка"));

//МЧД
Результат.Колонки.Добавить("Сертификат");
Результат.Колонки.Добавить("СтрокаМЧД");
Результат.Колонки.Добавить("GUIDФайла"); 

Для Каждого Строка из Результат Цикл
	
	ПустойUTC = "+00:00";
	
	//////Заполнение списка иных получателей файла при необходимости
	//	ИдПолИной = Новый СписокЗначений;
	//	ИдПолИной.Добавить("11111");
	//	ИдПолИной.Добавить("22222");
	//	ИдПолИной.Добавить("33333");
	//	Строка.ИдПолИной 		= ИдПолИной;
	
	//Заполняем данные из ТЧ дополнительные реквизиты
	Для каждого СтрокаРеквизит Из Строка.Ссылка.ДополнительныеРеквизиты Цикл
		Попытка
			Строка[СтрокаРеквизит.Реквизит] = СтрокаРеквизит.Значение;
		Исключение
			//Колонки нет
		КонецПопытки;
	КонецЦикла;	 	
	
	ИдентификаторФайла        = Строка.ИдентификаторДокумента; 
	//Общие данные
	Строка.ВерсФорм 		= "5.01";
	Строка.ВерсПрог 		= "Docrobot 1C";
	Строка.ИдФайл 			= ИдентификаторФайла;
	Строка.ИмяФайла 		= ИдентификаторФайла+".xml";
	Строка.КНД 			= "1110342";
	Строка.ПоФактХЖ 		= "Транспортная накладная, информация перевозчика о выдаче груза грузополучателю";
	Строка.ДатИнфПрвВыд 	= Строка(Формат(ТекущаяДата(),"ДФ=dd.MM.yyyy"));
	Строка.ВрИнфПрвВыд 	= Строка(Формат(ТекущаяДата(),"ДФ=чч:мм:сс"));
	
	Строка.СодОпер			= "Груз с указанными характеристиками сдан водителем, уполномоченным перевозчиком на перевозку груза, лицу, управомоченному на получение груза"; 
	ДатФайлЗак = ВернутьЗначениеДопРеквизитаИзДокумента("Документ_ДатИнфГП", Строка.ДокументОснование.ДополнительныеРеквизиты);
	ВрФайлЗак = ВернутьЗначениеДопРеквизитаИзДокумента("Документ_ВрИнфГП", Строка.ДокументОснование.ДополнительныеРеквизиты);
	
	Строка.ДатФайлИнфГП	= ДатФайлЗак; //Строка(Формат(Строка.ДатаОсн,"ДФ=dd.MM.yyyy"));
	Строка.ВрФайлИнфГП	= ВрФайлЗак; //Строка(Формат(Строка.ДатаОсн,"ДФ=чч:мм:сс"));
	
	Если ЗначениеЗаполнено(Строка.ЗамДатаВрПрибСтр) Тогда
		Строка.ЗамДатаВрПрибСтр = Строка(Формат(Строка.ЗамДатВрПриб,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ЗамДатВрПриб,"ДФ=чч:мм:сс") + ПустойUTC;
		Строка.НалКоорТочВрПр  	= "0";
	Иначе		
		Строка.НалКоорТочВрПр  	= "";
	КонецЕсли; 
	
	Если ЗначениеЗаполнено(Строка.ЗамДатВрУбытСтр) Тогда
		Строка.ЗамДатВрУбытСтр 	= Строка(Формат(Строка.ЗамДатВрУбыт,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ЗамДатВрУбыт,"ДФ=чч:мм:сс") + ПустойUTC;
		Строка.НалКоорТочВрУб 	= "0";
	Иначе		
		Строка.НалКоорТочВрУб  	= "";
	КонецЕсли; 
	
	Если ЗначениеЗаполнено(Строка.ЗамДатВрПосВыгрСтр) Тогда
		Строка.ЗамДатВрПосВыгрСтр  = Строка(Формат(Строка.ЗамДатВрПосВыгр,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ЗамДатВрПосВыгр,"ДФ=чч:мм:сс") + ПустойUTC;
		Строка.НалКоорТочВрВыгр	= "0";
	Иначе		
		Строка.НалКоорТочВрВыгр = "";
	КонецЕсли; 	  
	
	//Получаем текст подписи из файла BIN 
	ДвоичныеДанныеBIN = Строка.Ссылка.ДанныеЭЦП.Получить();
	//ВременныйКаталог = ПутьВременногоКаталога_DR();		
	//ПутьКФайлу 		 = ВременныйКаталог + "Подпись_" + Строка.Номер + ".bin"; //Формат(ТекущаяДата(), "ДФ=yyyyMMddHHmmss") + ".bin"; 
	//ДвоичныеДанныеBIN.Записать(ПутьКФайлу);	
	//Текст = Новый ТекстовыйДокумент;
	//Текст.Прочитать(ПутьКФайлу);		
	//Строка.ЭП = Текст.ПолучитьТекст();	
	
	//Попытка
	//	УдалитьФайлы(ПутьКФайлу);
	//Исключение
	//КонецПопытки;
	
	//Альтернативный способ получения подписи, для сертификатов хранящихся в формате base64
	
	ПодписьBase64 = Base64Строка(ДвоичныеДанныеBIN);  
	ПодписьBase64 = СтрЗаменить(ПодписьBase64, Символы.ПС, "");
	ПодписьBase64 = СтрЗаменить(ПодписьBase64, Символы.ВК, "");
	Строка.ЭП = ПодписьBase64;
	
	
	//////////////////////МЧД//////////////////////
	СтрокаПоМЧД = ТаблицаМЧД.Найти(Строка.Организация, "Организация");
	Если СтрокаПоМЧД &lt;&gt; Неопределено И СтрокаПоМЧД.Организация_ПоддерживаетМЧД = Истина И Строка.ОтправитьМЧД = Истина Тогда 
		
		Если СтрокаПоМЧД.Сертификат = Null ИЛИ СтрокаПоМЧД.ТипСертификата = 2 И (НЕ ЗначениеЗаполнено(СтрокаПоМЧД.СтрокаМЧД) ИЛИ НЕ СтрокаПоМЧД.МЧД_Актуальна) Тогда  
			ТекстЛогаСобытий = "Проверьте наличие доверенности для пользователя по организации " + Строка.Организация;
			ЗаписьСтруктурыЛога = ЗаполненнаяЗаписьЛога(ТекстЛогаСобытий, "Ошибка", "Выполнение ГН исходящие");
			МассивЛогаСобытий.Добавить(ЗаписьСтруктурыЛога);
			
			Продолжить;
		КонецЕсли; 
		Если СтрокаПоМЧД.ТипСертификата = 2 Тогда	
			Строка.ОтправитьМЧД = Истина;
			Строка.СтрокаМЧД 	= СтрокаПоМЧД.СтрокаМЧД;  
			ПодписантТип                    = "ФЛ";  
		Иначе
			ПодписантТип                    = "ЮЛ"; 
		КонецЕсли;	
		
		Строка.Сертификат 				= СтрокаПоМЧД.Сертификат; 
		
		ДолжностьПодписанта             = СтрокаПоМЧД.ДолжностьПодписанта;
		ФамилияПодписанта               = СтрокаПоМЧД.ФамилияПодписанта;
		ИмяПодписанта                   = СтрокаПоМЧД.ИмяПодписанта;
		ОтчествоПодписанта              = СтрокаПоМЧД.ОтчествоПодписанта;
		СертификатОбластьПолномочий    	= СтрокаПоМЧД.ОбластьПолномочий;
		СертификатОснованиеПолномочий   = СтрокаПоМЧД.ОснованиеПолномочий;
		СертификатСтатусПодписанта      = СтрокаПоМЧД.СтатусПодписанта;
		ОргПодписантИНН                 = СтрокаПоМЧД.СертификатИНН;
		ОтпечатокСертификата			= СтрокаПоМЧД.ОтпечатокСертификата;
		
		МассивGUID = DR_СтрРазделить(ИдентификаторФайла,"_");
		Строка.GUIDФайла = МассивGUID[МассивGUID.Количество()-1];
		
	Иначе           
		ДанныеПоОрганизации = DR_GLN_Прочитать(Строка.Организация, "Грузоперевозчик");
		Сертификат 						= ДанныеПоОрганизации.Сертификат;
		Строка.Сертификат 				= Сертификат; 
		
		ДолжностьПодписанта             = Сертификат.ДолжностьПодписанта;
		ФамилияПодписанта               = Сертификат.ФамилияПодписанта;
		ИмяПодписанта                   = Сертификат.ИмяПодписанта;
		ОтчествоПодписанта              = Сертификат.ОтчествоПодписанта;
		СертификатОбластьПолномочий    	= Сертификат.ОбластьПолномочий;
		СертификатОснованиеПолномочий   = Сертификат.ОснованиеПолномочий;
		СертификатСтатусПодписанта      = Сертификат.СтатусПодписанта;
		ОргПодписантИНН                 = Сертификат.ИНН;  
		ПодписантТип                    = Сертификат.ТипСертификата; 
		ОтпечатокСертификата			= Сертификат.ОтпечатокСертификата;
	КонецЕсли;
	
	//Сведения о Подписанте
	Попытка
		
		Строка.СтатПодп			= СертификатСтатусПодписанта;
		Строка.ДолжнПодп		= ДолжностьПодписанта;
		Строка.ФамилияПодп		= ФамилияПодписанта;
		Строка.ИмяПодп			= ИмяПодписанта;
		Строка.ОтчествоПодп		= ОтчествоПодписанта;
		
	Исключение
	КонецПопытки;
	
	DR_Документ = Строка.Ссылка.ПолучитьОбъект();
	НоваяСтрока = DR_Документ.ДополнительныеРеквизиты.Добавить();
	НоваяСтрока.Реквизит = "Документ_ДатИнфПрвВыд";
	НоваяСтрока.Значение = Строка.ДатИнфПрвВыд; 
	НоваяСтрока = DR_Документ.ДополнительныеРеквизиты.Добавить();
	НоваяСтрока.Реквизит = "Документ_ВрИнфПрвВыд";
	НоваяСтрока.Значение = Строка.ВрИнфПрвВыд;
	DR_Документ.Записать();
	
КонецЦикла;

Возврат Результат</Value>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">5</lastId>
			<item>
				<value xsi:type="xs:string">ИдФайл</value>
				<presentation>Документ.ИдФайл</presentation>
				<id xsi:type="xs:decimal">3</id>
			</item>
			<item>
				<value xsi:type="xs:string">ВерсПрог</value>
				<presentation>Документ.ВерсПрог</presentation>
				<id xsi:type="xs:decimal">4</id>
			</item>
			<item>
				<value xsi:type="xs:string">ВерсФорм</value>
				<presentation>Документ.ВерсФорм</presentation>
				<id xsi:type="xs:decimal">5</id>
			</item>
		</Value>
		<Value xsi:type="Structure">
			<Property name="Ссылка">
				<Value xsi:type="xs:string">Документ.Ссылка</Value>
			</Property>
			<Property name="ВидДокумента">
				<Value xsi:type="xs:string">Документ.ВидДокумента</Value>
			</Property>
			<Property name="Идентификатор">
				<Value xsi:type="xs:string">Документ.ИдентификаторДокумента</Value>
			</Property>
			<Property name="Номер">
				<Value xsi:type="xs:string">Документ.Номер</Value>
			</Property>
			<Property name="ФайлИмя">
				<Value xsi:type="xs:string">Документ.ИмяФайла</Value>
			</Property>
			<Property name="Организация">
				<Value xsi:type="xs:string">Документ.Организация</Value>
			</Property>
			<Property name="Грузоотправитель">
				<Value xsi:type="xs:string">Документ.Грузоотправитель</Value>
			</Property>
			<Property name="Грузополучатель">
				<Value xsi:type="xs:string">Документ.Грузополучатель</Value>
			</Property>
			<Property name="Грузоперевозчик">
				<Value xsi:type="xs:string">Документ.Грузоперевозчик</Value>
			</Property>
		</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">-1</lastId>
		</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="ValueTable"/>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">-1</lastId>
		</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">4</lastId>
			<item>
				<value xsi:type="xs:string">ДополнительныйПолучатель</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоперевозчик</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузополучатель</value>
				<id xsi:type="xs:decimal">2</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоотправитель</value>
				<id xsi:type="xs:decimal">3</id>
			</item>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>Отправить титул ГПер Т4</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">4</id>
			</item>
		</Value>
	</row>
</ValueTree>