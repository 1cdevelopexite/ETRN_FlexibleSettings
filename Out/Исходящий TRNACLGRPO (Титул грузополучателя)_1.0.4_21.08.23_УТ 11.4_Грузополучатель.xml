<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ТипТранзакции</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Источник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Приемник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Атрибуты</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Данные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ДанныеЗначения</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ДоступныеЗначения</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Связи</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Обязательный</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<row>
			<row>
				<Value xsi:type="xs:boolean">false</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">ОснДоверОргСост</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">4</lastId>
					<item>
						<value xsi:type="xs:string">НаимДок</value>
						<id xsi:type="xs:decimal">0</id>
					</item>
					<item>
						<value xsi:type="xs:string">НомерДок</value>
						<id xsi:type="xs:decimal">1</id>
					</item>
					<item>
						<value xsi:type="xs:string">ДатаДок</value>
						<id xsi:type="xs:decimal">2</id>
					</item>
					<item>
						<value xsi:type="xs:string">ИдДок</value>
						<id xsi:type="xs:decimal">3</id>
					</item>
					<item>
						<value xsi:type="xs:string">ДопСведДок</value>
						<id xsi:type="xs:decimal">4</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:boolean">false</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">ИдИнфПрвПрием</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">11</lastId>
					<item>
						<value xsi:type="xs:string">ИдФайлИнфПрвПрием</value>
						<presentation>Документ.ИдентификаторОснования</presentation>
						<id xsi:type="xs:decimal">8</id>
					</item>
					<item>
						<value xsi:type="xs:string">ДатФайлПрвПрием</value>
						<presentation>Документ.ДатФайлПрвПрием</presentation>
						<id xsi:type="xs:decimal">9</id>
					</item>
					<item>
						<value xsi:type="xs:string">ВрФайлПрвПрием</value>
						<presentation>Документ.ВрФайлПрвПрием</presentation>
						<id xsi:type="xs:decimal">10</id>
					</item>
					<item>
						<value xsi:type="xs:string">ЭП</value>
						<presentation>Документ.ЭП</presentation>
						<id xsi:type="xs:decimal">11</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<row>
					<row>
						<row>
							<Value xsi:type="xs:boolean">true</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string">АдресРФ</Value>
							<Value xsi:nil="true"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">26</lastId>
								<item>
									<value xsi:type="xs:string">Индекс</value>
									<presentation>Документ.ИндексГП</presentation>
									<id xsi:type="xs:decimal">18</id>
								</item>
								<item>
									<value xsi:type="xs:string">КодРегион</value>
									<presentation>Документ.КодРегионГП</presentation>
									<id xsi:type="xs:decimal">19</id>
								</item>
								<item>
									<value xsi:type="xs:string">Район</value>
									<presentation>Документ.РайонГП</presentation>
									<id xsi:type="xs:decimal">20</id>
								</item>
								<item>
									<value xsi:type="xs:string">Город</value>
									<presentation>Документ.ГородГП</presentation>
									<id xsi:type="xs:decimal">21</id>
								</item>
								<item>
									<value xsi:type="xs:string">НаселПункт</value>
									<presentation>Документ.НаселПунктГП</presentation>
									<id xsi:type="xs:decimal">22</id>
								</item>
								<item>
									<value xsi:type="xs:string">Улица</value>
									<presentation>Документ.УлицаГП</presentation>
									<id xsi:type="xs:decimal">23</id>
								</item>
								<item>
									<value xsi:type="xs:string">Дом</value>
									<presentation>Документ.ДомГП</presentation>
									<id xsi:type="xs:decimal">24</id>
								</item>
								<item>
									<value xsi:type="xs:string">Корпус</value>
									<presentation>Документ.КорпусГП</presentation>
									<id xsi:type="xs:decimal">25</id>
								</item>
								<item>
									<value xsi:type="xs:string">Кварт</value>
									<presentation>Документ.КвартГП</presentation>
									<id xsi:type="xs:decimal">26</id>
								</item>
							</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="ValueTable"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:boolean">true</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
						</row>
						<Value xsi:type="xs:boolean">true</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">АдрВыгруз</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">1</lastId>
							<item>
								<value xsi:type="xs:string"/>
								<id xsi:type="xs:decimal">1</id>
							</item>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">true</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<row>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="xs:string">МасГруз</Value>
							<Value xsi:nil="true"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">9</lastId>
								<item>
									<value xsi:type="xs:string">МасБрутЗнач</value>
									<presentation>СвПринПоНаим.МасБрутЗнач</presentation>
									<id xsi:type="xs:decimal">8</id>
								</item>
								<item>
									<value xsi:type="xs:string">МасНетЗнач</value>
									<presentation>СвПринПоНаим.МасНетЗнач</presentation>
									<id xsi:type="xs:decimal">9</id>
								</item>
							</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="ValueTable"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:decimal">0</Value>
							<Value xsi:type="xs:boolean">false</Value>
							<Value xsi:type="xs:string"/>
							<Value xsi:type="ValueListType">
								<valueType/>
								<lastId xsi:type="xs:decimal">-1</lastId>
							</Value>
						</row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">СвПринПоНаим</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">14</lastId>
							<item>
								<value xsi:type="xs:string">НаимГруз</value>
								<presentation>СвПринПоНаим.НаимГруз</presentation>
								<id xsi:type="xs:decimal">12</id>
							</item>
							<item>
								<value xsi:type="xs:string">СостГруз</value>
								<presentation>СвПринПоНаим.СостГруз</presentation>
								<id xsi:type="xs:decimal">13</id>
							</item>
							<item>
								<value xsi:type="xs:string">КолМест</value>
								<presentation>СвПринПоНаим.КолМестГр</presentation>
								<id xsi:type="xs:decimal">14</id>
							</item>
						</Value>
						<Value xsi:type="xs:string">Запрос = Новый Запрос;  
Запрос.Текст ="ВЫБРАТЬ
              |	DR_Документы.ДанныеДокумента КАК ДанныеДокумента,
              |	DR_Документы.Ссылка КАК Ссылка
              |ИЗ
              |	Документ.DR_Документы КАК DR_Документы
              |ГДЕ
              |	DR_Документы.Ссылка В(&amp;Документ)";

Запрос.УстановитьПараметр("Документ", Источник);
РезультатЗапроса = Запрос.Выполнить(); 
Результат = РезультатЗапроса.Выгрузить(); 

Для Каждого Строка из Результат Цикл  
	
	СтруктураТЧ = Строка.ДанныеДокумента.Получить();
	
	Для Каждого МассивДанныхТЧ Из СтруктураТЧ Цикл
		
		Если МассивДанныхТЧ.Ключ = "СведенияОГрузе" Тогда
			Результат = Новый ТаблицаЗначений;
		
			Если МассивДанныхТЧ.Значение.Количество() Тогда
				//Добавляем колонки
				Для Каждого КлючСтруктуры Из МассивДанныхТЧ.Значение[0] Цикл
					Результат.Колонки.Добавить(КлючСтруктуры.Ключ);	
				КонецЦикла;
				Результат.Колонки.Добавить("Ссылка", Новый ОписаниеТипов("ДокументСсылка.DR_Документы"));
				Результат.Колонки.Добавить("НаимОКВ", Новый ОписаниеТипов("Строка"));
						
				//Пишем данные в таблицу значений
				Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
					НоваяСтрока = Результат.Добавить(); 
					ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
					
					//формат
					НоваяСтрока.Ссылка 		= Строка.Ссылка; 
					НоваяСтрока.КодОКВ 		= "643"; 
					НоваяСтрока.НаимОКВ 	= "Рубль";  
					НоваяСтрока.СтЦеннГр	= Формат(НоваяСтрока.СтЦеннГр,"ЧРД=.;ЧГ=0");
					НоваяСтрока.МасНетЗнач	= Формат(НоваяСтрока.МасНетЗнач,"ЧРД=.;ЧГ=0");
					НоваяСтрока.МасБрутЗнач	= Формат(НоваяСтрока.МасБрутЗнач,"ЧРД=.;ЧГ=0");
	               	НоваяСтрока.КолМестГр	= Формат(НоваяСтрока.КолМестГр,"ЧРД=.;ЧГ=0");
				КонецЦикла;
				
				//ЗначениеВРеквизитФормы(Результат, МассивДанныхТЧ.Ключ); 
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;	
	
КонецЦикла;


Возврат Результат;</Value>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">14</lastId>
							<item>
								<value xsi:type="xs:string">Номенклатура</value>
								<id xsi:type="xs:decimal">0</id>
							</item>
							<item>
								<value xsi:type="xs:string">НаимГруз</value>
								<id xsi:type="xs:decimal">1</id>
							</item>
							<item>
								<value xsi:type="xs:string">СостГруз</value>
								<id xsi:type="xs:decimal">2</id>
							</item>
							<item>
								<value xsi:type="xs:string">СпУпак</value>
								<id xsi:type="xs:decimal">3</id>
							</item>
							<item>
								<value xsi:type="xs:string">ВидТар</value>
								<id xsi:type="xs:decimal">4</id>
							</item>
							<item>
								<value xsi:type="xs:string">КолМестГр</value>
								<id xsi:type="xs:decimal">5</id>
							</item>
							<item>
								<value xsi:type="xs:string">Маркировка</value>
								<id xsi:type="xs:decimal">6</id>
							</item>
							<item>
								<value xsi:type="xs:string">МасНетЗнач</value>
								<id xsi:type="xs:decimal">7</id>
							</item>
							<item>
								<value xsi:type="xs:string">МасБрутЗнач</value>
								<id xsi:type="xs:decimal">8</id>
							</item>
							<item>
								<value xsi:type="xs:string">СтЦеннГр</value>
								<id xsi:type="xs:decimal">9</id>
							</item>
							<item>
								<value xsi:type="xs:string">КодОКВ</value>
								<id xsi:type="xs:decimal">10</id>
							</item>
							<item>
								<value xsi:type="xs:string">ВидДокумента</value>
								<id xsi:type="xs:decimal">11</id>
							</item>
							<item>
								<value xsi:type="xs:string">Ссылка</value>
								<id xsi:type="xs:decimal">12</id>
							</item>
							<item>
								<value xsi:type="xs:string">НаимОКВ</value>
								<id xsi:type="xs:decimal">13</id>
							</item>
							<item>
								<value xsi:type="xs:string">НомерПоПорядку</value>
								<id xsi:type="xs:decimal">14</id>
							</item>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">5</lastId>
							<item>
								<value xsi:type="xs:string">Документ.ИдентификаторДокумента</value>
								<presentation>СвПринПоНаим.ИмяФайла</presentation>
								<id xsi:type="xs:decimal">5</id>
							</item>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">ИнфПол</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ПриемГрузГП</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">53</lastId>
						<item>
							<value xsi:type="xs:string">ФДатВрПриб</value>
							<presentation>Документ.ФДатВрПрибСтр</presentation>
							<id xsi:type="xs:decimal">42</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрФПр</value>
							<presentation>Документ.НалКоорТочВрФПр</presentation>
							<id xsi:type="xs:decimal">43</id>
						</item>
						<item>
							<value xsi:type="xs:string">ФДатВрУбыт</value>
							<presentation>Документ.ФДатВрУбытСтр</presentation>
							<id xsi:type="xs:decimal">44</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрФУб</value>
							<presentation>Документ.НалКоорТочВрФУб</presentation>
							<id xsi:type="xs:decimal">45</id>
						</item>
						<item>
							<value xsi:type="xs:string">ЗаявДатВрПриб</value>
							<presentation>Документ.ЗаявДатВрПрибСтр</presentation>
							<id xsi:type="xs:decimal">46</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрЗПр</value>
							<presentation>Документ.НалКоорТочВрЗПр</presentation>
							<id xsi:type="xs:decimal">47</id>
						</item>
						<item>
							<value xsi:type="xs:string">МетОпрМасс</value>
							<presentation>Документ.МетОпрМасс</presentation>
							<id xsi:type="xs:decimal">48</id>
						</item>
						<item>
							<value xsi:type="xs:string">КолМестПриемЧ</value>
							<presentation>Документ.КолМестПриемЧ</presentation>
							<id xsi:type="xs:decimal">49</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОбщСвСост</value>
							<presentation>Документ.ОбщСвСост</presentation>
							<id xsi:type="xs:decimal">50</id>
						</item>
						<item>
							<value xsi:type="xs:string">МасБрутЗначПрием</value>
							<presentation>Документ.МасБрутЗначПрием</presentation>
							<id xsi:type="xs:decimal">51</id>
						</item>
						<item>
							<value xsi:type="xs:string">МасНетЗначПрием</value>
							<id xsi:type="xs:decimal">52</id>
						</item>
						<item>
							<value xsi:type="xs:string">Объем</value>
							<id xsi:type="xs:decimal">53</id>
						</item>
					</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<row>
						<Value xsi:type="xs:boolean">true</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">СвАкт</Value>
						<Value xsi:type="xs:string">Возврат ОтметГП.Признак = 2;</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">25</lastId>
							<item>
								<value xsi:type="xs:string">НаимДок</value>
								<presentation>ОтметГП.НаименованиеДокумента</presentation>
								<id xsi:type="xs:decimal">21</id>
							</item>
							<item>
								<value xsi:type="xs:string">НомерДок</value>
								<presentation>ОтметГП.НомерДокумента</presentation>
								<id xsi:type="xs:decimal">22</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДатаДок</value>
								<presentation>ОтметГП.ДатаСвАкт</presentation>
								<id xsi:type="xs:decimal">23</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИдДок</value>
								<presentation>ОтметГП.ИД_Документа</presentation>
								<id xsi:type="xs:decimal">24</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДопСведДок</value>
								<presentation>ОтметГП.ДополнительныеСведения</presentation>
								<id xsi:type="xs:decimal">25</id>
							</item>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<Value xsi:type="xs:boolean">true</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">РазмШтр</Value>
						<Value xsi:type="xs:string">Возврат ОтметГП.Признак = 1;</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">47</lastId>
							<item>
								<value xsi:type="xs:string">ФактКолЕдИзм</value>
								<presentation>ОтметГП.ФактКолЕдИзм</presentation>
								<id xsi:type="xs:decimal">40</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИтогРазмШтрРФ</value>
								<presentation>ОтметГП.ИтогРазмШтрРФ</presentation>
								<id xsi:type="xs:decimal">41</id>
							</item>
							<item>
								<value xsi:type="xs:string">КодОКВ</value>
								<presentation>ОтметГП.КодОКВ</presentation>
								<id xsi:type="xs:decimal">42</id>
							</item>
							<item>
								<value xsi:type="xs:string">НаимОКВ</value>
								<presentation>ОтметГП.ВалютаНаименованиеОКВ</presentation>
								<id xsi:type="xs:decimal">43</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИтогРазмШтрИн</value>
								<presentation>ОтметГП.ИтогРазмШтрИн</presentation>
								<id xsi:type="xs:decimal">44</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДатаКурсВал</value>
								<presentation>ОтметГП.ДатаКурсВал</presentation>
								<id xsi:type="xs:decimal">45</id>
							</item>
							<item>
								<value xsi:type="xs:string">КурсВал</value>
								<presentation>ОтметГП.КурсВал</presentation>
								<id xsi:type="xs:decimal">46</id>
							</item>
							<item>
								<value xsi:type="xs:string">РасчШтр</value>
								<presentation>ОтметГП.РасчШтр</presentation>
								<id xsi:type="xs:decimal">47</id>
							</item>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<Value xsi:type="xs:boolean">true</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">СвАктВзв</Value>
						<Value xsi:type="xs:string">Возврат ОтметГП.Признак = 3;</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">27</lastId>
							<item>
								<value xsi:type="xs:string">НаимДок</value>
								<presentation>ОтметГП.НаименованиеДокумента</presentation>
								<id xsi:type="xs:decimal">23</id>
							</item>
							<item>
								<value xsi:type="xs:string">НомерДок</value>
								<presentation>ОтметГП.НомерДокумента</presentation>
								<id xsi:type="xs:decimal">24</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДатаДок</value>
								<presentation>ОтметГП.ДатаСвАкт</presentation>
								<id xsi:type="xs:decimal">25</id>
							</item>
							<item>
								<value xsi:type="xs:string">ИдДок</value>
								<presentation>ОтметГП.ИД_Документа</presentation>
								<id xsi:type="xs:decimal">26</id>
							</item>
							<item>
								<value xsi:type="xs:string">ДопСведДок</value>
								<presentation>ОтметГП.ДополнительныеСведения</presentation>
								<id xsi:type="xs:decimal">27</id>
							</item>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<row>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="xs:string">ИнфПол</Value>
						<Value xsi:nil="true"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueTable"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:decimal">0</Value>
						<Value xsi:type="xs:boolean">false</Value>
						<Value xsi:type="xs:string"/>
						<Value xsi:type="ValueListType">
							<valueType/>
							<lastId xsi:type="xs:decimal">-1</lastId>
						</Value>
					</row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ОтметГП</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">5</lastId>
						<item>
							<value xsi:type="xs:string">ДатВрОтмет</value>
							<presentation>Документ.ДатаОтметки</presentation>
							<id xsi:type="xs:decimal">3</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрОтм</value>
							<presentation>Документ.ОтметкиАктаВзвешивания</presentation>
							<id xsi:type="xs:decimal">4</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОбстОтмет</value>
							<presentation>Документ.ОписаниеОбстоятельств</presentation>
							<id xsi:type="xs:decimal">5</id>
						</item>
					</Value>
					<Value xsi:type="xs:string">Запрос = Новый Запрос;  
Запрос.Текст ="ВЫБРАТЬ
              |	DR_Документы.ДанныеДокумента КАК ДанныеДокумента,
              |	DR_Документы.Ссылка КАК Ссылка
              |ИЗ
              |	Документ.DR_Документы КАК DR_Документы
              |ГДЕ
              |	DR_Документы.Ссылка В(&amp;Документ)";

Запрос.УстановитьПараметр("Документ", Источник);
РезультатЗапроса = Запрос.Выполнить(); 
Результат = РезультатЗапроса.Выгрузить(); 

Для Каждого Строка из Результат Цикл  
	
	СтруктураТЧ = Строка.ДанныеДокумента.Получить();
	
	Результат = Новый ТаблицаЗначений;
	
	Результат.Колонки.Добавить("ДатВрОтмет", Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("ОбстОтмет", Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("ОтмАктВзв", Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("НалКоорТочВрОтм", Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("Ссылка", Новый ОписаниеТипов("ДокументСсылка.DR_Документы"));
		
	Для Каждого МассивДанныхТЧ Из СтруктураТЧ Цикл
				
		Если МассивДанныхТЧ.Ключ = "СведенияШтрафов" Тогда
			Если МассивДанныхТЧ.Значение.Количество() Тогда
										
				Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
					НоваяСтрока = Результат.Добавить(); 
					ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
					
					НоваяСтрока.Ссылка 		= Строка.Ссылка; 
				КонецЦикла; 
			КонецЕсли;
		КонецЕсли;
		
		Если МассивДанныхТЧ.Ключ = "СведенияИныхАктов" Тогда		
			Если МассивДанныхТЧ.Значение.Количество() Тогда						
				Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
					НоваяСтрока = Результат.Добавить(); 
					ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
					
					НоваяСтрока.Ссылка 		= Строка.Ссылка; 
				КонецЦикла; 
			КонецЕсли;
		КонецЕсли;
		
		Если МассивДанныхТЧ.Ключ = "СведенияАктовВзвешивания" Тогда		
			Если МассивДанныхТЧ.Значение.Количество() Тогда						
				Для Каждого СтруктураТЧ Из МассивДанныхТЧ.Значение Цикл
					НоваяСтрока = Результат.Добавить(); 
					ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);
					
					НоваяСтрока.Ссылка 		= Строка.Ссылка; 
				КонецЦикла; 
			КонецЕсли;
		КонецЕсли;
		
	КонецЦикла;
	
КонецЦикла;

Результат.Свернуть("ДатВрОтмет, НалКоорТочВрОтм, ОбстОтмет, ОтмАктВзв, Ссылка");


Возврат Результат;</Value>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">5</lastId>
						<item>
							<value xsi:type="xs:string">ДатВрОтмет</value>
							<id xsi:type="xs:decimal">0</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОбстОтмет</value>
							<id xsi:type="xs:decimal">1</id>
						</item>
						<item>
							<value xsi:type="xs:string">ОтмАктВзв</value>
							<id xsi:type="xs:decimal">2</id>
						</item>
						<item>
							<value xsi:type="xs:string">НалКоорТочВрОтм</value>
							<id xsi:type="xs:decimal">3</id>
						</item>
						<item>
							<value xsi:type="xs:string">Ссылка</value>
							<id xsi:type="xs:decimal">4</id>
						</item>
						<item>
							<value xsi:type="xs:string">НомерПоПорядку</value>
							<id xsi:type="xs:decimal">5</id>
						</item>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">3</lastId>
						<item>
							<value xsi:type="xs:string">Документ.Ссылка</value>
							<presentation>ОтметГП.Ссылка</presentation>
							<id xsi:type="xs:decimal">3</id>
						</item>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ИнфПол</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">СодИнфГП</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">16</lastId>
					<item>
						<value xsi:type="xs:string">УИД_ТрН</value>
						<presentation>Документ.УИдТрН</presentation>
						<id xsi:type="xs:decimal">13</id>
					</item>
					<item>
						<value xsi:type="xs:string">СодОпПр</value>
						<presentation>Документ.СодОпПр</presentation>
						<id xsi:type="xs:decimal">14</id>
					</item>
					<item>
						<value xsi:type="xs:string">СодОпОтк</value>
						<presentation>Документ.СодОпОтк</presentation>
						<id xsi:type="xs:decimal">15</id>
					</item>
					<item>
						<value xsi:type="xs:string">ПричОтк</value>
						<presentation>Документ.ПричОтк</presentation>
						<id xsi:type="xs:decimal">16</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<row>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">ФИО</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">4</lastId>
						<item>
							<value xsi:type="xs:string">Фамилия</value>
							<presentation>Документ.ФамилияПодп</presentation>
							<id xsi:type="xs:decimal">2</id>
						</item>
						<item>
							<value xsi:type="xs:string">Имя</value>
							<presentation>Документ.ИмяПодп</presentation>
							<id xsi:type="xs:decimal">3</id>
						</item>
						<item>
							<value xsi:type="xs:string">Отчество</value>
							<presentation>Документ.ОтчествоПодп</presentation>
							<id xsi:type="xs:decimal">4</id>
						</item>
					</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:boolean">true</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<row>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="xs:string">СвДовер</Value>
					<Value xsi:nil="true"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">1</lastId>
						<item>
							<value xsi:type="xs:string">ДатаДовер</value>
							<id xsi:type="xs:decimal">0</id>
						</item>
						<item>
							<value xsi:type="xs:string">ИдентДовер</value>
							<id xsi:type="xs:decimal">1</id>
						</item>
					</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueTable"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:decimal">0</Value>
					<Value xsi:type="xs:boolean">false</Value>
					<Value xsi:type="xs:string"/>
					<Value xsi:type="ValueListType">
						<valueType/>
						<lastId xsi:type="xs:decimal">-1</lastId>
					</Value>
				</row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">Подписант</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">4</lastId>
					<item>
						<value xsi:type="xs:string">СтатПодп</value>
						<presentation>Документ.СтатПодп</presentation>
						<id xsi:type="xs:decimal">3</id>
					</item>
					<item>
						<value xsi:type="xs:string">Должн</value>
						<presentation>Документ.ДолжнПодп</presentation>
						<id xsi:type="xs:decimal">4</id>
					</item>
				</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueTable"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:decimal">0</Value>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Документ</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">18</lastId>
				<item>
					<value xsi:type="xs:string">КНД</value>
					<presentation>Документ.КНД</presentation>
					<id xsi:type="xs:decimal">14</id>
				</item>
				<item>
					<value xsi:type="xs:string">ПоФактХЖ</value>
					<presentation>Документ.ПоФактХЖ</presentation>
					<id xsi:type="xs:decimal">15</id>
				</item>
				<item>
					<value xsi:type="xs:string">ДатИнфГП</value>
					<presentation>Документ.ДатИнфГП</presentation>
					<id xsi:type="xs:decimal">16</id>
				</item>
				<item>
					<value xsi:type="xs:string">ВрИнфГП</value>
					<presentation>Документ.ВрИнфГП</presentation>
					<id xsi:type="xs:decimal">17</id>
				</item>
				<item>
					<value xsi:type="xs:string">НаимЭконСубСост</value>
					<presentation>Документ.НаимЭконСубСост</presentation>
					<id xsi:type="xs:decimal">18</id>
				</item>
			</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="ValueTable"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
			<Value xsi:type="xs:decimal">0</Value>
			<Value xsi:type="xs:decimal">0</Value>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Исходящий TRNACLGRPO (Титул грузополучателя)</Value>
		<Value xsi:type="xs:string">Документ_Основание</Value>
		<Value xsi:type="xs:string">Файл</Value>
		<Value xsi:type="Structure">
			<Property name="Ссылка">
				<Value xsi:type="xs:string">Документ.Ссылка</Value>
			</Property>
			<Property name="ВидДокумента">
				<Value xsi:type="xs:string">Документ.ВидДокумента</Value>
			</Property>
			<Property name="Идентификатор">
				<Value xsi:type="xs:string">Документ.ИдФайл</Value>
			</Property>
			<Property name="Номер">
				<Value xsi:type="xs:string">Документ.Номер</Value>
			</Property>
			<Property name="ФайлИмя">
				<Value xsi:type="xs:string">Документ.ИмяФайла</Value>
			</Property>
			<Property name="Организация">
				<Value xsi:type="xs:string">Документ.Организация</Value>
			</Property>
			<Property name="Грузоотправитель">
				<Value xsi:type="xs:string">Документ.Грузоотправитель</Value>
			</Property>
			<Property name="Грузополучатель">
				<Value xsi:type="xs:string">Документ.Грузополучатель</Value>
			</Property>
			<Property name="Грузоперевозчик">
				<Value xsi:type="xs:string">Документ.Перевозчик</Value>
			</Property>
		</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">2</lastId>
			<item>
				<value xsi:type="xs:string">ИдФайл</value>
				<presentation>Документ.ИдФайл</presentation>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">ВерсПрог</value>
				<presentation>Документ.ВерсПрог</presentation>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">ВерсФорм</value>
				<presentation>Документ.ВерсФорм</presentation>
				<id xsi:type="xs:decimal">2</id>
			</item>
		</Value>
		<Value xsi:type="xs:string">ЗапросМЧД = Новый Запрос; 
ЗапросМЧД.УстановитьПараметр("ЭтоРегламентноеЗадание", ЭтоРегламентноеЗадание); 
ЗапросМЧД.УстановитьПараметр("Пользователь", НайтиТекущегоПользователя()); 
ЗапросМЧД.УстановитьПараметр("ТекущаяДата", ТекущаяДата()); 
ЗапросМЧД.УстановитьПараметр("DR_УчастникиОбмена", DR_УчастникиОбмена.Выгрузить()); 
ЗапросМЧД.УстановитьПараметр("DR_ПрофилиОбмена", DR_ПрофилиОбмена.Выгрузить()); 
ЗапросМЧД.Текст = ТекстЗапроса_МЧД_ПоОрганизациям(); 
ТаблицаМЧД = ЗапросМЧД.Выполнить().Выгрузить();

Запрос = Новый Запрос;
 Запрос.Текст ="ВЫБРАТЬ
 |	DR_УчастникиОбмена.Ссылка КАК Ссылка,
 |	DR_УчастникиОбмена.GLN КАК GLN,
 |	DR_УчастникиОбмена.GUID КАК GUID,
 |	DR_УчастникиОбмена.Роль КАК Роль,
 |	DR_УчастникиОбмена.Адрес_Город КАК Адрес_Город,
 |	DR_УчастникиОбмена.Адрес_Дом КАК Адрес_Дом,
 |	DR_УчастникиОбмена.Адрес_Индекс КАК Адрес_Индекс,
 |	DR_УчастникиОбмена.Адрес_ИностранныйАдрес КАК Адрес_ИностранныйАдрес,
 |	DR_УчастникиОбмена.Адрес_Квартира КАК Адрес_Квартира,
 |	DR_УчастникиОбмена.Адрес_КодРегиона КАК Адрес_КодРегиона,
 |	DR_УчастникиОбмена.Адрес_Корпус КАК Адрес_Корпус,
 |	DR_УчастникиОбмена.Адрес_НаселПункт КАК Адрес_НаселПункт,
 |	DR_УчастникиОбмена.Адрес_Район КАК Адрес_Район,
 |	DR_УчастникиОбмена.Адрес_Улица КАК Адрес_Улица,
 |	DR_УчастникиОбмена.Адрес_ЯвляетсяИностранным КАК Адрес_ЯвляетсяИностранным,
 |	DR_УчастникиОбмена.ОператорЭДО КАК ОператорЭДО,
 |	DR_УчастникиОбмена.ПоддерживаетМЧД КАК ОтправитьМЧД,
 |	DR_УчастникиОбмена.ПрофильОбмена КАК ПрофильОбмена
 |ПОМЕСТИТЬ DR_УчастникиОбмена
 |ИЗ
 |	&amp;DR_УчастникиОбмена КАК DR_УчастникиОбмена
 |;
 |
 |////////////////////////////////////////////////////////////////////////////////
 |ВЫБРАТЬ
 |	DR_ДокументыДополнительныеРеквизиты.Ссылка КАК Ссылка,
 |	DR_ДокументыДополнительныеРеквизиты.Реквизит КАК Реквизит,
 |	DR_ДокументыДополнительныеРеквизиты.Значение КАК Значение
 |ПОМЕСТИТЬ DR_ДополнительныеРеквизиты
 |ИЗ
 |	Документ.DR_Документы.ДополнительныеРеквизиты Как DR_ДокументыДополнительныеРеквизиты
 |ГДЕ
 |	DR_ДокументыДополнительныеРеквизиты.Ссылка В (&amp;Документ)
 |;
 |
 |////////////////////////////////////////////////////////////////////////////////
 |ВЫБРАТЬ
 |	DR_Документ.Ссылка КАК DR_Документ,
 |	Грузоотправитель_GUID.Значение КАК Грузоотправитель,
 |	Грузополучатель_GUID.Значение КАК Грузополучатель,
 |	Грузоперевозчик_GUID.Значение КАК Грузоперевозчик,
 |	Организация_GUID.Значение КАК Организация,
 |	Заказчик_GUID.Значение КАК Заказчик
 |ПОМЕСТИТЬ ВТ_DRДокументУчастники
 |ИЗ 
 |	Документ.DR_Документы Как DR_Документ
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузоотправитель_GUID
 |		ПО DR_Документ.Ссылка = Грузоотправитель_GUID.Ссылка
 |			И Грузоотправитель_GUID.Реквизит = ""Грузоотправитель""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузополучатель_GUID
 |		ПО DR_Документ.Ссылка = Грузополучатель_GUID.Ссылка 
 |			И Грузополучатель_GUID.Реквизит = ""Грузополучатель""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Грузоперевозчик_GUID
 |		ПО DR_Документ.Ссылка = Грузоперевозчик_GUID.Ссылка
 |			И Грузоперевозчик_GUID.Реквизит = ""Грузоперевозчик""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Организация_GUID
 |		ПО DR_Документ.Ссылка = Организация_GUID.Ссылка 
 |			И Организация_GUID.Реквизит = ""Организация""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_ДополнительныеРеквизиты КАК Заказчик_GUID
 |		ПО DR_Документ.Ссылка = Заказчик_GUID.Ссылка
 |			И Заказчик_GUID.Реквизит = ""Заказчик"" 
 |ГДЕ
 |	DR_Документ.Ссылка В (&amp;Документ)
 |;
 |
 |////////////////////////////////////////////////////////////////////////////////
 |ВЫБРАТЬ
 |  DR_Документы.Ссылка КАК Ссылка,
 |  DR_Документы.Ссылка.Номер КАК Номер,
 |  DR_Документы.Ссылка.ИдентификаторДокумента КАК ИдентификаторДокумента,
 |	""ON_TRNACLGROT_Исходящий"" КАК ВидДокумента,
 |	ЕСТЬNULL(Организация_GUID.Ссылка, Значение(Справочник.Организации.ПустаяСсылка)) КАК Организация,
 |	ЕСТЬNULL(Заказчик_GUID.Ссылка, Значение(Справочник.Контрагенты.ПустаяСсылка)) КАК Заказчик,
 |	ЕСТЬNULL(Грузоотправитель_GUID.Ссылка, Значение(Справочник.Организации.ПустаяСсылка)) КАК Грузоотправитель,
 |	ЕСТЬNULL(Грузополучатель_GUID.Ссылка, Значение(Справочник.Контрагенты.ПустаяСсылка)) КАК Грузополучатель,
 |	ЕСТЬNULL(Перевозчик_GUID.Ссылка, Значение(Справочник.Контрагенты.ПустаяСсылка)) КАК Перевозчик,
 |	Организация_GUID.ОтправитьМЧД КАК ОтправитьМЧД,
 |	Грузоотправитель_GUID.Ссылка.ИНН КАК ГрузоотправительИНН,
 |	Грузополучатель_GUID.Ссылка.ИНН КАК ГрузополучательИНН,
 |	Перевозчик_GUID.Ссылка.ИНН КАК ГрузоперевозчикИНН,
 |	Заказчик_GUID.Ссылка.ИНН КАК ЗаказчикИНН,
 |	Грузоотправитель_GUID.Ссылка.КПП КАК ГрузоотправительКПП,
 |	Грузополучатель_GUID.Ссылка.КПП КАК ГрузополучательКПП,
 |	Перевозчик_GUID.Ссылка.КПП КАК ГрузоперевозчикКПП,
 |	Заказчик_GUID.Ссылка.КПП КАК ЗаказчикКПП,
 |	Грузополучатель_GUID.GUID КАК Грузополучатель_GUID,
 |	Грузополучатель_GUID.Адрес_Город КАК ГородГП,
 |	Грузополучатель_GUID.Адрес_Дом КАК ДомГП,
 |	Грузополучатель_GUID.Адрес_Индекс КАК ИндексГП,
 |	Грузополучатель_GUID.Адрес_ИностранныйАдрес КАК ИностранныйАдресГП,
 |	Грузополучатель_GUID.Адрес_Квартира КАК КвартГП,
 |	Грузополучатель_GUID.Адрес_КодРегиона КАК КодРегионГП,
 |	Грузополучатель_GUID.Адрес_Корпус КАК КорпусГП,
 |	Грузополучатель_GUID.Адрес_НаселПункт КАК НаселПунктГП,
 |	Грузополучатель_GUID.Адрес_Район КАК РайонГП,
 |	Грузополучатель_GUID.Адрес_Улица КАК УлицаГП,
 |	Грузополучатель_GUID.Адрес_ЯвляетсяИностранным КАК ЯвляетсяИностраннымГП,
 |	Грузополучатель_GUID.Ссылка.Представление КАК ПредставлениеГрузополучателя
 |ИЗ
 |	Документ.DR_Документы КАК DR_Документы
 |		Левое соединение ВТ_DRДокументУчастники КАК DRДокументУчастники
 | 		По DR_Документы.Ссылка = DRДокументУчастники.DR_Документ
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК Грузоотправитель_GUID
 |		ПО DRДокументУчастники.Грузоотправитель = Грузоотправитель_GUID.Ссылка 
 |			И Грузоотправитель_GUID.Роль = ""Грузоотправитель""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК Грузополучатель_GUID
 |		ПО DRДокументУчастники.Грузополучатель = Грузополучатель_GUID.Ссылка  
 |			И Грузополучатель_GUID.Роль = ""Грузополучатель""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК Перевозчик_GUID
 |		ПО DRДокументУчастники.ГрузоПеревозчик = Перевозчик_GUID.Ссылка
 |			И Перевозчик_GUID.Роль = ""Грузоперевозчик""
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК Заказчик_GUID
 |		ПО DRДокументУчастники.Заказчик = Заказчик_GUID.Ссылка
 |		ЛЕВОЕ СОЕДИНЕНИЕ DR_УчастникиОбмена КАК Организация_GUID
 |		ПО DRДокументУчастники.Организация = Организация_GUID.Ссылка
 |ГДЕ
 |	DR_Документы.Ссылка В(&amp;Документ)";
 Запрос.УстановитьПараметр("DR_УчастникиОбмена", DR_УчастникиОбмена.Выгрузить());
 Запрос.УстановитьПараметр("Документ", Источник);
 РезультатЗапроса = Запрос.Выполнить(); 
 Результат = РезультатЗапроса.Выгрузить(); 

//&lt;Файл&gt;
Результат.Колонки.Добавить("ИдФайл"					, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ИмяФайла"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВерсПрог"				, Новый ОписаниеТипов("Строка"));
Результат.Колонки.Добавить("ВерсФорм"				, Новый ОписаниеТипов("Строка"));
	//&lt;Документ&gt;
	Результат.Колонки.Добавить("КНД"					, Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("ПоФактХЖ"				, Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("ДатИнфГП"				, Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("ВрИнфГП"				, Новый ОписаниеТипов("Строка"));
	Результат.Колонки.Добавить("НаимЭконСубСост"		, Новый ОписаниеТипов("Строка"));
		//&lt;ОснДоверОргСост&gt;
		Результат.Колонки.Добавить("НаимДокУЧАСТ"			, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("НомерДокУЧАСТ"			, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ДатаДокУЧАСТ"			, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ИдДокУЧАСТ"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ДопСведДокУЧАСТ"		, Новый ОписаниеТипов("Строка"));
		//&lt;/ОснДоверОргСост&gt;
		//&lt;ИдИнфПрвПрием&gt;
		Результат.Колонки.Добавить("ИдентификаторОснования"	, Новый ОписаниеТипов("Строка")); //ИдФайлИнфПрвПрием
		Результат.Колонки.Добавить("ДатФайлПрвПрием"		, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ВрФайлПрвПрием"			, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ЭП"						, Новый ОписаниеТипов("Строка"));
		//&lt;/ИдИнфПрвПрием&gt;
		//&lt;СодИнфГП&gt;
		Результат.Колонки.Добавить("УИдТрН"					, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("СодОпПр"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("СодОпОтк"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ПричОтк"				, Новый ОписаниеТипов("Строка"));
			//&lt;ПриемГрузГП&gt;
			Результат.Колонки.Добавить("ФДатВрПриб"				, Новый ОписаниеТипов("Дата"));
			Результат.Колонки.Добавить("ФДатВрПрибСтр"			, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("НалКоорТочВрФПр"		, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("ФДатВрУбыт"				, Новый ОписаниеТипов("Дата"));
			Результат.Колонки.Добавить("ФДатВрУбытСтр"			, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("НалКоорТочВрФУб"		, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("ЗаявДатВрПриб"			, Новый ОписаниеТипов("Дата"));
			Результат.Колонки.Добавить("ЗаявДатВрПрибСтр"		, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("НалКоорТочВрЗПр"		, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("МетОпрМасс"				, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("КолМестПриемЧ"			, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("ОбщСвСост"				, Новый ОписаниеТипов("Строка"));
			Результат.Колонки.Добавить("МасБрутЗначПрием"		, Новый ОписаниеТипов("Строка"));
			//&lt;/ПриемГрузГП&gt;
		//&lt;/СодИнфГП&gt;
		//&lt;Подписант&gt;
		Результат.Колонки.Добавить("СтатПодп"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ДолжнПодп"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ФамилияПодп"			, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ИмяПодп"				, Новый ОписаниеТипов("Строка"));
		Результат.Колонки.Добавить("ОтчествоПодп"			, Новый ОписаниеТипов("Строка"));
		//&lt;/Подписант&gt;
	//&lt;Документ&gt;
//&lt;Файл&gt; 

//МЧД
Результат.Колонки.Добавить("Сертификат");
Результат.Колонки.Добавить("СтрокаМЧД");
Результат.Колонки.Добавить("GUIDФайла"); 

Для Каждого Строка из Результат Цикл
	 
	 //GUIDФайла = Новый УникальныйИдентификатор;
	 ПустойUTC = "+00:00";
	 
	 //////Заполнение списка иных получателей файла при необходимости
	 //	ИдПолИной = Новый СписокЗначений;
	 //	ИдПолИной.Добавить("11111");
	 //	ИдПолИной.Добавить("22222");
	 //	ИдПолИной.Добавить("33333");
	 //	Строка.ИдПолИной 		= ИдПолИной;
	 
	 ГрузоотправительКПП   = СокрЛП(Строка.ГрузоотправительКПП);
	 ГрузополучательКПП    = СокрЛП(Строка.ГрузополучательКПП);
	 ГрузоперевозчикКПП    = СокрЛП(Строка.ГрузоперевозчикКПП);
	 ЗаказчикКПП    	   = СокрЛП(Строка.ЗаказчикКПП);
	 
	 СписокАдресов = Новый Соответствие;
	 
	 СписокАдресов.Вставить("ГрузополучательИндекс"         , "");
	 СписокАдресов.Вставить("ГрузополучательКодРегиона"     , "");
	 СписокАдресов.Вставить("ГрузополучательРайон"          , "");
	 СписокАдресов.Вставить("ГрузополучательГород"          , "");
	 СписокАдресов.Вставить("ГрузополучательНаселенныйПункт", "");
	 СписокАдресов.Вставить("ГрузополучательУлица"          , "");
	 СписокАдресов.Вставить("ГрузополучательДом"            , "");
	 СписокАдресов.Вставить("ГрузополучательКорпус"         , "");
	 СписокАдресов.Вставить("ГрузополучательКвартира"       , "");
	 СписокАдресов.Вставить("ГрузополучательКодРегионаИзКПП", Лев(ГрузополучательКПП, 2));
	 	 
	 СписокЭлементовАдреса = Новый СписокЗначений;
	 
	 Если ЗначениеЗаполнено(Строка.ИндексГП) Тогда
		 СписокАдресов["ГрузополучательИндекс"]          = Строка.ИндексГП;
		 СписокАдресов["ГрузополучательКодРегиона"]      = Строка.КодРегионГП;
		 СписокАдресов["ГрузополучательРайон"]           = Строка.РайонГП;
		 СписокАдресов["ГрузополучательГород"]           = Строка.ГородГП;
		 СписокАдресов["ГрузополучательНаселенныйПункт"] = Строка.НаселПунктГП;
		 СписокАдресов["ГрузополучательУлица"]           = Строка.УлицаГП;
		 СписокАдресов["ГрузополучательДом"]             = Строка.ДомГП;
		 СписокАдресов["ГрузополучательКорпус"]          = Строка.КорпусГП;
		 СписокАдресов["ГрузополучательКвартира"]        = Строка.КвартГП;
	 Иначе 
		 АдресИз1С = DR_ПолучитьАдресИзБазы1С(Строка.Грузополучатель.Ссылка);
		 Если Не АдресИз1С = Неопределено и АдресИз1С.Количество() Тогда
			 СписокЭлементовАдреса.Добавить(Новый Структура("ИзБазыТипАдреса, ИзБазыЗначениеАдреса, ТипОбъекта",
			 АдресИз1С.Тип, АдресИз1С.Значение, "Грузополучатель"), Строка.ПредставлениеГрузополучателя);
		 КонецЕсли;
	 КонецЕсли;
	 
	 
	 Для Каждого СтрАдреса Из СписокЭлементовАдреса Цикл
		 Если НЕ ЗначениеЗаполнено(СтрАдреса.Значение.ИзБазыЗначениеАдреса) Тогда
			 ТекстЛогаСобытий = "Не заполнен &lt;&lt;&lt;юридический адрес в справочнике " + СтрАдреса.Значение.ТипОбъекта + "&gt;&gt;&gt;. Проверьте заполнение адреса " + СтрАдреса.Представление;
			 сообщить(ТекстЛогаСобытий);
			 //DR_ЭПД_ОбщегоНазначения.ЗаписатьЛогСобытий(ЛогСобытий, ТекстЛогаСобытий);
			 
			 БылиОшибкиВАдресе = Истина;
		 Иначе
			 КлючИндекс          = СтрАдреса.Значение.ТипОбъекта + "Индекс";
			 КлючКодРегиона      = СтрАдреса.Значение.ТипОбъекта + "КодРегиона";
			 КлючРайон           = СтрАдреса.Значение.ТипОбъекта + "Район";
			 КлючНаселенныйПункт = СтрАдреса.Значение.ТипОбъекта + "НаселенныйПункт";
			 КлючУлица           = СтрАдреса.Значение.ТипОбъекта + "Улица";
			 КлючДом             = СтрАдреса.Значение.ТипОбъекта + "Дом";
			 КлючКорпус          = СтрАдреса.Значение.ТипОбъекта + "Корпус";
			 КлючКвартира        = СтрАдреса.Значение.ТипОбъекта + "Квартира";
			 КлючКодРегионаИзКПП = СтрАдреса.Значение.ТипОбъекта + "КодРегионаИзКПП";
			 
			 ДанныеАдреса = УправлениеКонтактнойИнформациейСлужебный.JSONВКонтактнуюИнформациюПоПолям(СтрАдреса.Значение.ИзБазыЗначениеАдреса, СтрАдреса.Значение.ИзБазыТипАдреса);
			 ДанныеАдреса.Свойство("ZIPcode" , СписокАдресов[КлючИндекс]);
			 ДанныеАдреса.Свойство("areaCode", СписокАдресов[КлючКодРегиона]);
			 Если НЕ ЗначениеЗаполнено(СписокАдресов[КлючКодРегиона]) Тогда
				 СписокАдресов[КлючКодРегиона] = СписокАдресов[КлючКодРегионаИзКПП];
			 КонецЕсли;
			 ДанныеАдреса.Свойство("district"   , СписокАдресов[КлючРайон]);
			 ДанныеАдреса.Свойство("locality"   , СписокАдресов[КлючНаселенныйПункт]);
			 ДанныеАдреса.Свойство("street"     , СписокАдресов[КлючУлица]);
			 ДанныеАдреса.Свойство("houseNumber", СписокАдресов[КлючДом]);
			 
			 КорпусМассив = Новый Массив;
			 ДанныеАдреса.Свойство("buildings", КорпусМассив);
			 Если НЕ КорпусМассив = Неопределено
				 И КорпусМассив.Количество() &gt; 0 Тогда
				 Для каждого Стр Из КорпусМассив Цикл
					 Если Стр.type = "Корпус" Тогда
						 СписокАдресов[КлючКорпус] = Стр.number;
						 Прервать;
					 КонецЕсли;
				 КонецЦикла;
			 КонецЕсли;
			 
			 КвартираМассив = Новый Массив;
			 ДанныеАдреса.Свойство("apartments", КвартираМассив);
			 Если НЕ КвартираМассив = Неопределено
				 И КвартираМассив.Количество() &gt; 0 Тогда
				 Для каждого Стр Из КвартираМассив Цикл
					 Если Стр.type = "Квартира" Тогда
						 СписокАдресов[КлючКвартира] = Стр.number;
						 Прервать;
					 КонецЕсли;
				 КонецЦикла;
			 КонецЕсли;
		 КонецЕсли;
		 
	 КонецЦикла;  
	 
	 // Обязательные параметры адреса
	 СписокЭлементовАдреса = Новый СписокЗначений;
	 СписокЭлементовАдреса.Добавить(Новый Структура("ЗначениеОбъекта, Представление", СписокАдресов["ГрузополучательКодРегиона"], Строка.ПредставлениеГрузополучателя), "код региона Грузополучателя");
	 СписокЭлементовАдреса.Добавить(Новый Структура("ЗначениеОбъекта, Представление", СписокАдресов["ГрузополучательИндекс"], Строка.ПредставлениеГрузополучателя), "индекс Грузополучателя");
	 
	 БылиОшибкиВАдресе = Ложь;
	 Для каждого ЗначениеЭлемента Из СписокЭлементовАдреса Цикл
		 Если НЕ ЗначениеЗаполнено(ЗначениеЭлемента.Значение.ЗначениеОбъекта) Тогда
			 ТекстЛогаСобытий = "Не заполнен &lt;&lt;&lt;" + ЗначениеЭлемента.Представление + "&gt;&gt;&gt;. Проверьте заполнение адреса " + СокрЛП(ЗначениеЭлемента.Значение.Представление);
			 //DR_ЭПД_ОбщегоНазначения.ЗаписатьЛогСобытий(ЛогСобытий, ТекстЛогаСобытий);
			 сообщить(ТекстЛогаСобытий);
			 БылиОшибкиВАдресе = Истина;
		 КонецЕсли;
	 КонецЦикла;
	 
	 Если БылиОшибкиВАдресе Тогда
		 Результат.Удалить(Строка);
		 Продолжить;
	 КонецЕсли;
	 
	 //Заполняем адрес	   	
  	 Строка.ИндексГП      = СокрЛП(СписокАдресов["ГрузополучательИндекс"]);
     Строка.КодРегионГП   = СокрЛП(СписокАдресов["ГрузополучательКодРегиона"]);
     Строка.РайонГП       = СокрЛП(СписокАдресов["ГрузополучательРайон"]);
     Строка.ГородГП       = СокрЛП(СписокАдресов["ГрузополучательГород"]);
     Строка.НаселПунктГП  = СокрЛП(СписокАдресов["ГрузополучательНаселенныйПункт"]);
     Строка.УлицаГП       = СокрЛП(СписокАдресов["ГрузополучательУлица"]);
     Строка.ДомГП         = СокрЛП(СписокАдресов["ГрузополучательДом"]);
     Строка.КорпусГП      = СокрЛП(СписокАдресов["ГрузополучательКорпус"]);
     Строка.КвартГП       = СокрЛП(СписокАдресов["ГрузополучательКвартира"]);	 
	 
	 //Заполняем данные из ТЧ дополнительные реквизиты
	 Для каждого СтрокаРеквизит Из Строка.Ссылка.ДополнительныеРеквизиты Цикл
	 	Попытка
	 		Строка[СтрокаРеквизит.Реквизит] = СтрокаРеквизит.Значение;
	 	Исключение
	 		//Колонки нет
	 	КонецПопытки;
	 КонецЦикла; 

	
	GUIDФайла = Новый УникальныйИдентификатор;
	ПустойUTC = "+00:00";

	ИдентификаторФайла      = СТрока.ИдентификаторДокумента;  // = "ON_TRNACLGRPO" + "_" + Строка.ГПрв_ОператорЭДО_Ид + Строка.ГПрв_GUID + "_" + Строка.ГП_ОператорЭДО_Ид + Строка.ГП_GUID + "_" + Строка.ГО_ОператорЭДО_Ид + Строка.ГО_GUID + "_0_" + Формат(ТекущаяДата(), "ДФ=yyyyMMdd") + "_" + GUIDФайла;
    //Общие данные
	Строка.ВерсФорм 		= "5.01";
	Строка.ВерсПрог 		= "Docrobot 1C";
	Строка.ИдФайл 			= ИдентификаторФайла;
	Строка.ИмяФайла 		= ИдентификаторФайла+".xml"; 
	//Строка.ИдФайлИнфПрвПрием = Строка.ИмяФайла;
	Строка.КНД 				= "1110341"; //"1110339";
	Строка.ПоФактХЖ 		= "Транспортная накладная, информация грузоотправителя";
	Строка.ДатИнфГП 		= Строка(Формат(ТекущаяДата(),"ДФ=dd.MM.yyyy"));
	Строка.ВрИнфГП 			= Строка(Формат(ТекущаяДата(),"ДФ=чч:мм:сс"));
	Строка.НаимЭконСубСост 	= Строка.Организация.НаименованиеПолное;	
	Строка.НаимДокУЧАСТ 	= "";
	Строка.НомерДокУЧАСТ 	= "";
	Строка.ДатаДокУЧАСТ 	= "";
	//Строка.УИД_ТрН			= Новый УникальныйИдентификатор();
	Строка.СодОпПр			= "Лицом, управомоченным на получение груза, при указанных обстоятельствах принят от перевозчика груз с указанными характеристиками";
	//Строка.СодОпОтк			= "Содержание операции: отказ в приеме груза";
	//Строка.ПричОтк			= "Причина отказа в приеме груза";
	Строка.ДатФайлПрвПрием	= Строка(Формат(ТекущаяДата(),"ДФ=dd.MM.yyyy"));
	Строка.ВрФайлПрвПрием	= Строка(Формат(ТекущаяДата(),"ДФ=чч:мм:сс"));
	//Строка.ЭП				= "???????????hxXBnY78iU6Erz9Urfi3Vw??????????"; 
	
	//Получаем текст подписи из файла BIN 
	ДвоичныеДанныеBIN = Строка.Ссылка.ДанныеЭЦП.Получить();
	//ВременныйКаталог = ПутьВременногоКаталога_DR();		
	//ПутьКФайлу 		 = ВременныйКаталог + "Подпись_" + Строка.Номер + ".bin"; //Формат(ТекущаяДата(), "ДФ=yyyyMMddHHmmss") + ".bin"; 
	//ДвоичныеДанныеBIN.Записать(ПутьКФайлу);	
	//Текст = Новый ТекстовыйДокумент;
	//Текст.Прочитать(ПутьКФайлу);		
	//Строка.ЭП = Текст.ПолучитьТекст();	
	
	//Попытка
	//	УдалитьФайлы(ПутьКФайлу);
	//Исключение
	//КонецПопытки;
	
	//Альтернативный способ получения подписи, для сертификатов хранящихся в формате base64
	
	ПодписьBase64 = Base64Строка(ДвоичныеДанныеBIN);  
	ПодписьBase64 = СтрЗаменить(ПодписьBase64, Символы.ПС, "");
	ПодписьBase64 = СтрЗаменить(ПодписьBase64, Символы.ВК, "");
	Строка.ЭП = ПодписьBase64;
	
	
	Строка.ФДатВрПрибСтр		= Строка(Формат(Строка.ФДатВрПриб,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ФДатВрПриб,"ДФ=чч:мм:сс") + ПустойUTC;
	Строка.НалКоорТочВрФПр		= "0";
	Строка.ФДатВрУбытСтр		= Строка(Формат(Строка.ФДатВрУбыт,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ФДатВрУбыт,"ДФ=чч:мм:сс") + ПустойUTC;
	Строка.НалКоорТочВрФУб		= "0";
	Строка.ЗаявДатВрПрибСтр   	= Строка(Формат(Строка.ЗаявДатВрПриб,"ДФ=dd.MM.yyyy")) + "T" + Формат(Строка.ЗаявДатВрПриб,"ДФ=чч:мм:сс") + ПустойUTC;
	Строка.НалКоорТочВрЗПр		= "0";

			
	//////////////////////МЧД//////////////////////
    СтрокаПоМЧД = ТаблицаМЧД.Найти(Строка.Организация, "Организация");
	Если СтрокаПоМЧД &lt;&gt; Неопределено И СтрокаПоМЧД.Организация_ПоддерживаетМЧД = Истина И Строка.ОтправитьМЧД = Истина Тогда 

		Если СтрокаПоМЧД.Сертификат = Null ИЛИ СтрокаПоМЧД.ТипСертификата = 2 И (НЕ ЗначениеЗаполнено(СтрокаПоМЧД.СтрокаМЧД) ИЛИ НЕ СтрокаПоМЧД.МЧД_Актуальна) Тогда  
	        ТекстЛогаСобытий = "Проверьте наличие доверенности для пользователя по организации " + Строка.Организация;
	        //ЗаписатьЛогСобытий(ЛогСобытий, ТекстЛогаСобы&lt;&gt;ий);
			
			//Результат.Удалить(Строка);
			
			ЗаписьСтруктурыЛога = ЗаполненнаяЗаписьЛога(ТекстЛогаСобытий, "Ошибка", "Выполнение ГН исходящие");
			МассивЛогаСобытий.Добавить(ЗаписьСтруктурыЛога);
			
        	Продолжить;
		КонецЕсли; 
		Если СтрокаПоМЧД.ТипСертификата = 2 Тогда	
			Строка.ОтправитьМЧД = Истина;
	    	Строка.СтрокаМЧД 	= СтрокаПоМЧД.СтрокаМЧД;  
			ПодписантТип                    = "ФЛ";  
		Иначе
			ПодписантТип                    = "ЮЛ"; //ВыборкаДокумента.ОрганизацияЮрФизЛицо;
		КонецЕсли;	
		
		Строка.Сертификат 				= СтрокаПоМЧД.Сертификат; 
		
		ДолжностьПодписанта             = СтрокаПоМЧД.ДолжностьПодписанта;
		ФамилияПодписанта               = СтрокаПоМЧД.ФамилияПодписанта;
		ИмяПодписанта                   = СтрокаПоМЧД.ИмяПодписанта;
		ОтчествоПодписанта              = СтрокаПоМЧД.ОтчествоПодписанта;
		СертификатОбластьПолномочий    	= СтрокаПоМЧД.ОбластьПолномочий;
		СертификатОснованиеПолномочий   = СтрокаПоМЧД.ОснованиеПолномочий;
		СертификатСтатусПодписанта      = СтрокаПоМЧД.СтатусПодписанта;
		ОргПодписантИНН                 = СтрокаПоМЧД.СертификатИНН;
		ОтпечатокСертификата			= СтрокаПоМЧД.ОтпечатокСертификата;
		
	Иначе           
		ДанныеПоОрганизации = DR_GLN_Прочитать(Строка.Организация, "Грузополучатель");
		Сертификат 						= ДанныеПоОрганизации.Сертификат;
		Строка.Сертификат 				= Сертификат; 
		
		ДолжностьПодписанта             = Сертификат.ДолжностьПодписанта;
		ФамилияПодписанта               = Сертификат.ФамилияПодписанта;
		ИмяПодписанта                   = Сертификат.ИмяПодписанта;
		ОтчествоПодписанта              = Сертификат.ОтчествоПодписанта;
		СертификатОбластьПолномочий    	= Сертификат.ОбластьПолномочий;
		СертификатОснованиеПолномочий   = Сертификат.ОснованиеПолномочий;
		СертификатСтатусПодписанта      = Сертификат.СтатусПодписанта;
		ОргПодписантИНН                 = Сертификат.ИНН;  
		ПодписантТип                    = Сертификат.ТипСертификата; 
		ОтпечатокСертификата			= Сертификат.ОтпечатокСертификата;
	КонецЕсли;
 
     
	 
	 //Сведения о Подписанте
	 Попытка
		 
		 //Сертификат = ДанныеПоОрганизации.Сертификат;
		 Строка.СтатПодп			= СертификатСтатусПодписанта;
		 Строка.ДолжнПодп			= ДолжностьПодписанта;
		 Строка.ФамилияПодп			= ФамилияПодписанта;
		 Строка.ИмяПодп				= ИмяПодписанта;
		 Строка.ОтчествоПодп		= ОтчествоПодписанта;
		 //Строка.ЭП					= ОтпечатокСертификата;	
	 Исключение
	 КонецПопытки;
	
КонецЦикла;


Возврат Результат;</Value>
		<Value xsi:type="ValueTable"/>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">0</lastId>
			<item>
				<value xsi:type="xs:string">НомерПоПорядку</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
		</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">-1</lastId>
		</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Отправить титул ГП</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">3</lastId>
			<item>
				<value xsi:type="xs:string">Грузоперевозчик</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузополучатель</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоотправитель</value>
				<id xsi:type="xs:decimal">2</id>
			</item>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>Отправить титул ГП</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">3</id>
			</item>
		</Value>
	</row>
</ValueTree>