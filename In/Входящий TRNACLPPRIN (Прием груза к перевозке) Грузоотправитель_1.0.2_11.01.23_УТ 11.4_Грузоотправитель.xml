<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ТипТранзакции</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Входящий TRNACLPPRIN (Прием груза к перевозке) Грузоотправитель</Value>
		<Value xsi:type="xs:string">//+     
Грузополучатель = ВернутьЗначениеДопРеквизитаИзДокумента("Грузополучатель", Приемник.ДополнительныеРеквизиты);

НоваяЗапись = Приемник.ДополнительныеРеквизиты.Добавить();
НоваяЗапись.Реквизит = "Организация";
Если ТипЗнч(Грузополучатель) = Тип("СправочникСсылка.Организация") Тогда 
	НоваяЗапись.Значение = Грузополучатель;
Иначе
	НоваяЗапись.Значение = ВернутьЗначениеДопРеквизитаИзДокумента("Грузоотправитель", Приемник.ДополнительныеРеквизиты);
КонецЕсли;

НоваяЗапись = Приемник.ДополнительныеРеквизиты.Добавить();
НоваяЗапись.Реквизит = "Заказчик";
НоваяЗапись.Значение = Грузополучатель;
//-

Если ЗначениеЗаполнено(СтруктураДокумента) Тогда
	ТЗШтрафы = Новый ТаблицаЗначений;
	ТЗАкты = Новый ТаблицаЗначений;
	
	ДобавитьКолонкиВТаблицуТЧ( , ТЗШтрафы, ТЗАкты, , Приемник.ВидДокумента);
          
	//Проверяем наличие ТЧ
	Если СтруктураДокумента.Свойство("Документ_СодИнфПрвПрием_ОтметПрвПрием_РазмШтр_") Тогда 
		
		МассивДанных = СтруктураДокумента.Документ_СодИнфПрвПрием_ОтметПрвПрием_РазмШтр_;						
			
		//Пишем данные в таблицу значений
		Для Каждого СтруктураТЧ Из МассивДанных Цикл
			НоваяСтрока = ТЗШтрафы.Добавить(); 
			ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);	
			НоваяСтрока.ВидДокумента = Приемник.ВидДокумента;		
		КонецЦикла; 
	
	Иначе 
		
		НоваяСтрока = ТЗШтрафы.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураДокумента);
		
	КонецЕсли;
	
	//Переименовываем колонки, чтобы их видела форма
	Для Каждого Колонка Из ТЗШтрафы.Колонки Цикл

		МассивЗначений = DR_ОбщегоНазначения.DR_СтрРазделить(Колонка.Имя,"_");						
		Колонка.Имя = МассивЗначений[МассивЗначений.Количество()-1]; 
			
	КонецЦикла;
           
    СтруктураДанных = Новый Структура;
    ЗаписатьТаблицуЗначенийВСтруктуру(ТЗШтрафы, "СведенияШтрафов", СтруктураДанных);   				
	               
	Если СтруктураДокумента.Свойство("Документ_СодИнфПрвПрием_ОтметПрвПрием_СвАкт_") Тогда 
		
		МассивДанных = СтруктураДокумента.Документ_СодИнфПрвПрием_ОтметПрвПрием_СвАкт_;						
			
		//Пишем данные в таблицу значений
		Для Каждого СтруктураТЧ Из МассивДанных Цикл
			НоваяСтрока = ТЗАкты.Добавить(); 
			ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураТЧ);	
			НоваяСтрока.ВидДокумента = Приемник.ВидДокумента;		
		КонецЦикла;   	
	
	Иначе 
		
		НоваяСтрока = ТЗАкты.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока, СтруктураДокумента);
					
	КонецЕсли; 
	
	//Переименовываем колонки, чтобы их видела форма
	Для Каждого Колонка Из ТЗАкты.Колонки Цикл
			
		//Дробим длинное наименование
		МассивЗначений = DR_ОбщегоНазначения.DR_СтрРазделить(Колонка.Имя,"_");						
		Колонка.Имя = МассивЗначений[МассивЗначений.Количество()-1]; 
			
	КонецЦикла;
	           
	ЗаписатьТаблицуЗначенийВСтруктуру(ТЗАкты, "СведенияИныхАктов", СтруктураДанных);           
	
	//ДобавитьЗначениеХЗВРеквизитОбъекта(Приемник, СтруктураДанных, "ДанныеДокумента", МассивЛогаСобытий);  
	НовыйРеквизит = Приемник.ДополнительныеРеквизиты.Добавить();
	НовыйРеквизит.Реквизит = "Таблицы";
	НовыйРеквизит.ХранилищеЗначения = Новый ХранилищеЗначения(СтруктураДанных);    
	    
КонецЕсли; 

УИдОснования = ВернутьЗначениеДопРеквизитаИзДокумента("Документ_ИдИнфГО_ИдФайлИнфГО", Приемник.ДополнительныеРеквизиты); 

Если ЗначениеЗаполнено(УИдОснования) Тогда
	
	 Запрос = Новый Запрос;  
	 Запрос.Текст ="ВЫБРАТЬ
	               |	DR_Документы.Ссылка КАК Ссылка
	               |ИЗ
	               |	Документ.DR_Документы КАК DR_Документы
	               |ГДЕ
	               |	DR_Документы.ИдентификаторДокумента = &amp;ИдентификаторДокумента";

	 Запрос.УстановитьПараметр("ИдентификаторДокумента", 	УИдОснования);
	 РезультатЗапроса = Запрос.Выполнить();
	  
	 Результат = РезультатЗапроса.Выбрать();
	 
	 Пока Результат.Следующий() Цикл 
	 	Титул1 = Результат.Ссылка.ПолучитьОбъект();
	 	УИдТрН = ВернутьЗначениеДопРеквизитаИзДокумента("УИдТрН", Приемник.ДополнительныеРеквизиты);
	 
		Отбор = Новый Структура;
		Отбор.Вставить("Реквизит", "УИдТрН");
						
		СтрокиПоиск = Титул1.ДополнительныеРеквизиты.НайтиСтроки(Отбор);
		Если СтрокиПоиск.Количество() Тогда
			СтрокаОбработки = СтрокиПоиск[0];	
		Иначе
			СтрокаОбработки = Титул1.ДополнительныеРеквизиты.Добавить();
		КонецЕсли;
						
		СтрокаОбработки.Реквизит = "УИдТрН";  
		СтрокаОбработки.Значение =  УИдТрН; 
		
		Титул1.Записать();  
	 КонецЦикла;                                                              
КонецЕсли;


Приемник.Статус = ПолучитьЗначение_Перечисления("Статусы","Обработан");  
           
</Value>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:string">Т2 Прием груза к перевозке (ON_TRNACLPPRIN)</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">3</lastId>
			<item>
				<value xsi:type="xs:string">Грузоперевозчик</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузополучатель</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоотправитель</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">2</id>
			</item>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>Т2 Прием груза к перевозке (ON_TRNACLPPRIN)</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">3</id>
			</item>
		</Value>
	</row>
</ValueTree>