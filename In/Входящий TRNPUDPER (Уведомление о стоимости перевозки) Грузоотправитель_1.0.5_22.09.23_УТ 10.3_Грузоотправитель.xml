<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ТипТранзакции</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Входящий TRNPUDPER (Уведомление о стоимости перевозки) Грузоотправитель</Value>
		<Value xsi:type="xs:string">Входящий TRNPUDPER (Уведомление о стоимости перевозки) Грузоотправитель</Value>
		<Value xsi:type="xs:string"/>
		<Value xsi:nil="true"/>
		<Value xsi:nil="true"/>
		<Value xsi:type="xs:string">СписокРеквизитов = Новый Соответствие;

//+
СписокРеквизитов.Вставить("Организация", ВернутьЗначениеДопРеквизитаИзДокумента("Грузоотправитель", Приемник.ДополнительныеРеквизиты));
                  
//Ищем т4                  
УИД_Основания = ВернутьЗначениеДопРеквизитаИзДокумента("Документ_ИдИнфПрвВыд_ИдФайлПрвВыд", Приемник.ДополнительныеРеквизиты);

ЗапросТ4 = Новый Запрос;
                  
ЗапросТ4.Текст =
"ВЫБРАТЬ
|	DR_Документы.Ссылка КАК Ссылка
|ИЗ
|	Документ.DR_Документы КАК DR_Документы
|ГДЕ
|	DR_Документы.ВидДокумента = ""ON_TRNACLPVYN_Входящий""
|	И DR_Документы.ИдентификаторДокумента = &amp;ИдентификаторДокумента"; 

ЗапросТ4.УстановитьПараметр("ИдентификаторДокумента", УИД_Основания);

РезультатЗапроса = ЗапросТ4.Выполнить(); 
Результат = РезультатЗапроса.Выгрузить();

Для Каждого Строка Из Результат Цикл
	ДопРеквизитыДок = Строка.Ссылка.ДополнительныеРеквизиты;
	
	СписокРеквизитов.Вставить("Грузополучатель", ВернутьЗначениеДопРеквизитаИзДокумента("Грузополучатель", ДопРеквизитыДок));
	СписокРеквизитов.Вставить("Заказчик", ВернутьЗначениеДопРеквизитаИзДокумента("Заказчик", ДопРеквизитыДок));                 
КонецЦикла;
                                    
//-   
Если ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("НаимДокОснованиеФХЖ", Приемник.ДополнительныеРеквизиты)) Или ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("ИдДокОснованиеФХЖ", Приемник.ДополнительныеРеквизиты)) Тогда
	СписокРеквизитов.Вставить("ЕстьОснованиеФХЖ", Истина); 
КонецЕсли;  

Если Не ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("СумНДС", Приемник.ДополнительныеРеквизиты)) Тогда
	СписокРеквизитов.Вставить("БезНДС", Истина); 
КонецЕсли;

Если ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("ИННЮЛ", Приемник.ДополнительныеРеквизиты)) Тогда
	ТипСтороны = "ЮЛ";
ИначеЕсли ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("ИННФЛ", Приемник.ДополнительныеРеквизиты)) Тогда
	ТипСтороны = "ФЛ";
ИначеЕсли ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("ИдСтатИЛ", Приемник.ДополнительныеРеквизиты)) Тогда
 	ТипСтороны = "ИЛ";
 	             
	ИдСтатИЛ = ВернутьЗначениеДопРеквизитаИзДокумента("ИдСтатИЛ", Приемник.ДополнительныеРеквизиты);
	
	Если ИдСтатИЛ = "ЮЛ" Тогда
		СписокРеквизитов.Вставить("НаимИЛЮЛ", ВернутьЗначениеДопРеквизитаИзДокумента("НаимИЛФЛ", Приемник.ДополнительныеРеквизиты));
	КонецЕсли;
КонецЕсли; 
СписокРеквизитов.Вставить("ТипСтороны", ТипСтороны); 

Если ЗначениеЗаполнено(ВернутьЗначениеДопРеквизитаИзДокумента("НомерИспр", Приемник.ДополнительныеРеквизиты)) Тогда
	СписокРеквизитов.Вставить("ЕстьИсправлениеПУД", Истина);
КонецЕсли; 

Для Каждого Запись из СписокРеквизитов Цикл
	
	Отбор = Новый Структура;
	Отбор.Вставить("Реквизит", Запись.Ключ);
					
	СтрокиПоиск = Приемник.ДополнительныеРеквизиты.НайтиСтроки(Отбор);
	Если СтрокиПоиск.Количество() Тогда
		НоваяЗапись = СтрокиПоиск[0];	
	Иначе
		НоваяЗапись = Приемник.ДополнительныеРеквизиты.Добавить();
	КонецЕсли;
	
	НоваяЗапись.Реквизит = Запись.Ключ;
	НоваяЗапись.Значение = Запись.Значение;
КонецЦикла;
	         
                   
Запрос = Новый Запрос;

Запрос.Текст =
"ВЫБРАТЬ
|	DR_ДокументыДополнительныеРеквизиты_ИдОсн.Ссылка КАК Ссылка
|ИЗ
|	Документ.DR_Документы.ДополнительныеРеквизиты КАК DR_ДокументыДополнительныеРеквизиты_ИдОсн
|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.DR_Документы КАК DR_Документы
|		ПО (DR_Документы.Ссылка = DR_ДокументыДополнительныеРеквизиты_ИдОсн.Ссылка)
|			И (DR_ДокументыДополнительныеРеквизиты_ИдОсн.Реквизит = ""Документ_ИдИнфПрвВыд_ИдФайлПрвВыд"")
|			И (DR_ДокументыДополнительныеРеквизиты_ИдОсн.Значение = &amp;УИД_Основания)
|ГДЕ
|	DR_Документы.ВидДокумента = ""ON_TRNPUDPER_Входящий""
|	И НЕ DR_Документы.Ссылка = &amp;ТекущийДокумент"; 

Запрос.УстановитьПараметр("УИД_Основания", УИД_Основания);
Запрос.УстановитьПараметр("ТекущийДокумент", Приемник.Ссылка);

РезультатЗапроса = Запрос.Выполнить(); 
Результат = РезультатЗапроса.Выгрузить();

Для Каждого Строка Из Результат Цикл
	АктуальныйДокумент = Строка.Ссылка.ПолучитьОбъект(); 
	АктуальныйДокумент.ПометкаУдаления = Истина;
    
    АктуальныйДокумент.Записать();
КонецЦикла;

Приемник.Статус = ПолучитьЗначение_Перечисления("Статусы","Обработан");  </Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">4</lastId>
			<item>
				<value xsi:type="xs:string">ДополнительныйПолучатель</value>
				<id xsi:type="xs:decimal">0</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоперевозчик</value>
				<id xsi:type="xs:decimal">1</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузополучатель</value>
				<id xsi:type="xs:decimal">2</id>
			</item>
			<item>
				<value xsi:type="xs:string">Грузоотправитель</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">3</id>
			</item>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>Входящий TRNPUDPER (Уведомление о стоимости перевозки) Грузоотправитель</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">4</id>
			</item>
		</Value>
	</row>
</ValueTree>